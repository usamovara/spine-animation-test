var spine=(()=>{var t,e,s,i,a,r,n,l,o,h,c,d,u=Object.defineProperty,m=t=>u(t,"__esModule",{value:!0}),$={};((t,e)=>{for(var s in m(t),e)u(t,s,{get:e[s],enumerable:!0})})($,{AlphaTimeline:()=>Z,Animation:()=>R,AnimationState:()=>tu,AnimationStateAdapter:()=>tf,AnimationStateData:()=>tk,AssetManager:()=>eP,AssetManagerBase:()=>tM,AtlasAttachmentLoader:()=>tV,Attachment:()=>T,AttachmentTimeline:()=>te,BinaryInput:()=>tQ,BlendMode:()=>h,Bone:()=>tD,BoneData:()=>t4,BoundingBoxAttachment:()=>tS,CURRENT:()=>t0,CanvasTexture:()=>eR,ClippingAttachment:()=>tI,Color:()=>_,ConstraintData:()=>t6,CurveTimeline:()=>D,CurveTimeline1:()=>M,CurveTimeline2:()=>L,DebugUtils:()=>Y,DeformTimeline:()=>ts,Downloader:()=>tL,DrawOrderTimeline:()=>tn,Event:()=>t2,EventData:()=>tE,EventQueue:()=>t$,EventTimeline:()=>ta,EventType:()=>s,FIRST:()=>tp,FakeTexture:()=>tC,HOLD_FIRST:()=>tx,HOLD_MIX:()=>tb,HOLD_SUBSEQUENT:()=>t_,IkConstraint:()=>tN,IkConstraintData:()=>tU,IkConstraintTimeline:()=>tl,IntSet:()=>f,Interpolation:()=>w,JitterEffect:()=>eF,MathUtils:()=>b,MeshAttachment:()=>t1,MixBlend:()=>t,MixDirection:()=>e,PathAttachment:()=>tB,PathConstraint:()=>t5,PathConstraintData:()=>tW,PathConstraintMixTimeline:()=>td,PathConstraintPositionTimeline:()=>th,PathConstraintSpacingTimeline:()=>tc,PointAttachment:()=>tR,Pool:()=>v,PositionMode:()=>n,Pow:()=>y,PowOut:()=>k,RGB2Timeline:()=>tt,RGBA2Timeline:()=>K,RGBATimeline:()=>J,RGBTimeline:()=>Q,RegionAttachment:()=>t3,RotateMode:()=>o,RotateTimeline:()=>E,SETUP:()=>tw,SUBSEQUENT:()=>tg,ScaleTimeline:()=>O,ScaleXTimeline:()=>q,ScaleYTimeline:()=>z,ShearTimeline:()=>j,ShearXTimeline:()=>H,ShearYTimeline:()=>G,Skeleton:()=>tz,SkeletonBinary:()=>tJ,SkeletonBounds:()=>ek,SkeletonClipping:()=>eI,SkeletonData:()=>t8,SkeletonJson:()=>eY,SkeletonRenderer:()=>eV,Skin:()=>tH,SkinEntry:()=>tj,Slot:()=>tq,SlotData:()=>tG,SpacingMode:()=>l,StringSet:()=>g,SwirlEffect:()=>eB,Texture:()=>tY,TextureAtlas:()=>tA,TextureAtlasPage:()=>tT,TextureAtlasRegion:()=>tF,TextureFilter:()=>i,TextureRegion:()=>tv,TextureWrap:()=>a,TimeKeeper:()=>A,Timeline:()=>V,TrackEntry:()=>tm,TransformConstraint:()=>t7,TransformConstraintData:()=>t9,TransformConstraintTimeline:()=>to,TransformMode:()=>r,TranslateTimeline:()=>N,TranslateXTimeline:()=>U,TranslateYTimeline:()=>W,Triangulator:()=>eS,Utils:()=>I,Vector2:()=>C,VertexAttachment:()=>B,WindowedMean:()=>X});var f=class{constructor(){this.array=[]}add(t){let e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return void 0!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}},g=class{constructor(){this.entries={},this.size=0}add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var s=0,i=t.length;s<i;s++)this.add(t[s]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}},p=class{constructor(t=0,e=0,s=0,i=0){this.r=t,this.g=e,this.b=s,this.a=i}set(t,e,s,i){return this.r=t,this.g=e,this.b=s,this.a=i,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,s,i){return this.r+=t,this.g+=e,this.b+=s,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return new p().setFromString(t)}},_=p;_.WHITE=new p(1,1,1,1),_.RED=new p(1,0,0,1),_.GREEN=new p(0,1,0,1),_.BLUE=new p(0,0,1,1),_.MAGENTA=new p(1,0,1,1);var x=class{static clamp(t,e,s){return t<e?e:t>s?s:t}static cosDeg(t){return Math.cos(t*x.degRad)}static sinDeg(t){return Math.sin(t*x.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return x.randomTriangularWith(t,e,(t+e)*.5)}static randomTriangularWith(t,e,s){let i=Math.random(),a=e-t;return i<=(s-t)/a?t+Math.sqrt(i*a*(s-t)):e-Math.sqrt((1-i)*a*(e-s))}static isPowerOfTwo(t){return t&&(t&t-1)==0}},b=x;b.PI=3.1415927,b.PI2=2*x.PI,b.radiansToDegrees=180/x.PI,b.radDeg=x.radiansToDegrees,b.degreesToRadians=x.PI/180,b.degRad=x.degreesToRadians;var w=class{apply(t,e,s){return t+(e-t)*this.applyInternal(s)}},y=class extends w{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1}},k=class extends y{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},S=class{static arrayCopy(t,e,s,i,a){for(let r=e,n=i;r<e+a;r++,n++)s[n]=t[r]}static arrayFill(t,e,s,i){for(let a=e;a<s;a++)t[a]=i}static setArraySize(t,e,s=0){let i=t.length;if(i==e)return t;if(t.length=e,i<e)for(let a=i;a<e;a++)t[a]=s;return t}static ensureArrayCapacity(t,e,s=0){return t.length>=e?t:S.setArraySize(t,e,s)}static newArray(t,e){let s=Array(t);for(let i=0;i<t;i++)s[i]=e;return s}static newFloatArray(t){if(S.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=Array(t);for(let s=0;s<e.length;s++)e[s]=0;return e}}static newShortArray(t){if(S.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=Array(t);for(let s=0;s<e.length;s++)e[s]=0;return e}}static toFloatArray(t){return S.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return S.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,s=!0){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}},I=S;I.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;var Y=class{static logBones(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e];console.log(s.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.worldX+", "+s.worldY)}}},v=class{constructor(t){this.items=[],this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}},C=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}},A=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},X=class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}},T=class{constructor(t){if(!t)throw Error("name cannot be null.");this.name=t}},F=class extends T{constructor(t){super(t),this.id=F.nextID++,this.bones=null,this.vertices=null,this.worldVerticesLength=0,this.deformAttachment=this}computeWorldVertices(t,e,s,i,a,r){s=a+(s>>1)*r;let n=t.bone.skeleton,l=t.deform,o=this.vertices,h=this.bones;if(!h){l.length>0&&(o=l);let c=t.bone,d=c.worldX,u=c.worldY,m=c.a,$=c.b,f=c.c,g=c.d;for(let p=e,_=a;_<s;p+=2,_+=r){let x=o[p],b=o[p+1];i[_]=x*m+b*$+d,i[_+1]=x*f+b*g+u}return}let w=0,y=0;for(let k=0;k<e;k+=2){let S=h[w];w+=S+1,y+=S}let I=n.bones;if(0==l.length)for(let Y=a,v=3*y;Y<s;Y+=r){let C=0,A=0,X=h[w++];for(X+=w;w<X;w++,v+=3){let T=I[h[w]],F=o[v],B=o[v+1],R=o[v+2];C+=(F*T.a+B*T.b+T.worldX)*R,A+=(F*T.c+B*T.d+T.worldY)*R}i[Y]=C,i[Y+1]=A}else{let P=l;for(let V=a,D=3*y,M=y<<1;V<s;V+=r){let L=0,E=0,N=h[w++];for(N+=w;w<N;w++,D+=3,M+=2){let U=I[h[w]],W=o[D]+P[M],O=o[D+1]+P[M+1],q=o[D+2];L+=(W*U.a+O*U.b+U.worldX)*q,E+=(W*U.c+O*U.d+U.worldY)*q}i[V]=L,i[V+1]=E}}}copyTo(t){this.bones?(t.bones=Array(this.bones.length),I.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=I.newFloatArray(this.vertices.length),I.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment}},B=F;B.nextID=0;var R=class{constructor(t,e,s){if(this.timelines=null,this.timelineIds=null,!t)throw Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}setTimelines(t){if(!t)throw Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new g;for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,s,i,a,r,n,l){if(!t)throw Error("skeleton cannot be null.");i&&0!=this.duration&&(s%=this.duration,e>0&&(e%=this.duration));let o=this.timelines;for(let h=0,c=o.length;h<c;h++)o[h].apply(t,e,s,a,r,n,l)}};!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(t||(t={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(e||(e={}));var P={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18},V=class{constructor(t,e){this.propertyIds=null,this.frames=null,this.propertyIds=e,this.frames=I.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let s=t.length;for(let i=1;i<s;i++)if(t[i]>e)return i-1;return s-1}static search(t,e,s){let i=t.length;for(let a=s;a<i;a+=s)if(t[a]>e)return a-s;return i-s}},D=class extends V{constructor(t,e,s){super(t,s),this.curves=null,this.curves=I.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let s=I.newFloatArray(e);I.arrayCopy(this.curves,0,s,0,e),this.curves=s}}setBezier(t,e,s,i,a,r,n,l,o,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);let m=(i-2*r+l)*.03,$=(a-2*n+o)*.03,f=((r-l)*3-i+h)*.006,g=((n-o)*3-a+c)*.006,p=2*m+f,_=2*$+g,x=(r-i)*.3+m+.16666667*f,b=(n-a)*.3+$+.16666667*g,w=i+x,y=a+b;for(let k=u+18;u<k;u+=2)d[u]=w,d[u+1]=y,x+=p,b+=_,p+=f,_+=g,w+=x,y+=b}getBezierValue(t,e,s,i){let a=this.curves;if(a[i]>t){let r=this.frames[e],n=this.frames[e+s];return n+(t-r)/(a[i]-r)*(a[i+1]-n)}let l=i+18;for(i+=2;i<l;i+=2)if(a[i]>=t){let o=a[i-2],h=a[i-1];return h+(t-o)/(a[i]-o)*(a[i+1]-h)}e+=this.getFrameEntries();let c=a[l-2],d=a[l-1];return d+(t-c)/(this.frames[e]-c)*(this.frames[e+s]-d)}},M=class extends D{constructor(t,e,s){super(t,e,[s])}getFrameEntries(){return 2}setFrame(t,e,s){t<<=1,this.frames[t]=e,this.frames[t+1]=s}getCurveValue(t){let e=this.frames,s=e.length-2;for(let i=2;i<=s;i+=2)if(e[i]>t){s=i-2;break}let a=this.curves[s>>1];switch(a){case 0:let r=e[s],n=e[s+1];return n+(t-r)/(e[s+2]-r)*(e[s+2+1]-n);case 1:return e[s+1]}return this.getBezierValue(t,s,1,a-2)}},L=class extends D{constructor(t,e,s,i){super(t,e,[s,i])}getFrameEntries(){return 3}setFrame(t,e,s,i){t*=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i}},E=class extends M{constructor(t,e,s){super(t,e,P.rotate+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;if(s<this.frames[0]){switch(r){case 0:l.rotation=l.data.rotation;break;case 1:l.rotation+=(l.data.rotation-l.rotation)*a}return}let o=this.getCurveValue(s);switch(r){case 0:l.rotation=l.data.rotation+o*a;break;case 1:case 2:o+=l.data.rotation-l.rotation;case 3:l.rotation+=o*a}}},N=class extends L{constructor(t,e,s){super(t,e,P.x+"|"+s,P.y+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;let o=this.frames;if(s<o[0]){switch(r){case 0:l.x=l.data.x,l.y=l.data.y;break;case 1:l.x+=(l.data.x-l.x)*a,l.y+=(l.data.y-l.y)*a}return}let h=0,c=0,d=V.search(o,s,3),u=this.curves[d/3];switch(u){case 0:let m=o[d];h=o[d+1],c=o[d+2];let $=(s-m)/(o[d+3]-m);h+=(o[d+3+1]-h)*$,c+=(o[d+3+2]-c)*$;break;case 1:h=o[d+1],c=o[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}switch(r){case 0:l.x=l.data.x+h*a,l.y=l.data.y+c*a;break;case 1:case 2:l.x+=(l.data.x+h-l.x)*a,l.y+=(l.data.y+c-l.y)*a;break;case 3:l.x+=h*a,l.y+=c*a}}},U=class extends M{constructor(t,e,s){super(t,e,P.x+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;if(s<this.frames[0]){switch(r){case 0:l.x=l.data.x;break;case 1:l.x+=(l.data.x-l.x)*a}return}let o=this.getCurveValue(s);switch(r){case 0:l.x=l.data.x+o*a;break;case 1:case 2:l.x+=(l.data.x+o-l.x)*a;break;case 3:l.x+=o*a}}},W=class extends M{constructor(t,e,s){super(t,e,P.y+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;if(s<this.frames[0]){switch(r){case 0:l.y=l.data.y;break;case 1:l.y+=(l.data.y-l.y)*a}return}let o=this.getCurveValue(s);switch(r){case 0:l.y=l.data.y+o*a;break;case 1:case 2:l.y+=(l.data.y+o-l.y)*a;break;case 3:l.y+=o*a}}},O=class extends L{constructor(t,e,s){super(t,e,P.scaleX+"|"+s,P.scaleY+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;let o=this.frames;if(s<o[0]){switch(r){case 0:l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY;break;case 1:l.scaleX+=(l.data.scaleX-l.scaleX)*a,l.scaleY+=(l.data.scaleY-l.scaleY)*a}return}let h,c,d=V.search(o,s,3),u=this.curves[d/3];switch(u){case 0:let m=o[d];h=o[d+1],c=o[d+2];let $=(s-m)/(o[d+3]-m);h+=(o[d+3+1]-h)*$,c+=(o[d+3+2]-c)*$;break;case 1:h=o[d+1],c=o[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}if(h*=l.data.scaleX,c*=l.data.scaleY,1==a)3==r?(l.scaleX+=h-l.data.scaleX,l.scaleY+=c-l.data.scaleY):(l.scaleX=h,l.scaleY=c);else{let f=0,g=0;if(1==n)switch(r){case 0:f=l.data.scaleX,g=l.data.scaleY,l.scaleX=f+(Math.abs(h)*b.signum(f)-f)*a,l.scaleY=g+(Math.abs(c)*b.signum(g)-g)*a;break;case 1:case 2:f=l.scaleX,g=l.scaleY,l.scaleX=f+(Math.abs(h)*b.signum(f)-f)*a,l.scaleY=g+(Math.abs(c)*b.signum(g)-g)*a;break;case 3:l.scaleX+=(h-l.data.scaleX)*a,l.scaleY+=(c-l.data.scaleY)*a}else switch(r){case 0:f=Math.abs(l.data.scaleX)*b.signum(h),g=Math.abs(l.data.scaleY)*b.signum(c),l.scaleX=f+(h-f)*a,l.scaleY=g+(c-g)*a;break;case 1:case 2:f=Math.abs(l.scaleX)*b.signum(h),g=Math.abs(l.scaleY)*b.signum(c),l.scaleX=f+(h-f)*a,l.scaleY=g+(c-g)*a;break;case 3:l.scaleX+=(h-l.data.scaleX)*a,l.scaleY+=(c-l.data.scaleY)*a}}}},q=class extends M{constructor(t,e,s){super(t,e,P.scaleX+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;if(s<this.frames[0]){switch(r){case 0:l.scaleX=l.data.scaleX;break;case 1:l.scaleX+=(l.data.scaleX-l.scaleX)*a}return}let o=this.getCurveValue(s)*l.data.scaleX;if(1==a)3==r?l.scaleX+=o-l.data.scaleX:l.scaleX=o;else{let h=0;if(1==n)switch(r){case 0:h=l.data.scaleX,l.scaleX=h+(Math.abs(o)*b.signum(h)-h)*a;break;case 1:case 2:h=l.scaleX,l.scaleX=h+(Math.abs(o)*b.signum(h)-h)*a;break;case 3:l.scaleX+=(o-l.data.scaleX)*a}else switch(r){case 0:h=Math.abs(l.data.scaleX)*b.signum(o),l.scaleX=h+(o-h)*a;break;case 1:case 2:h=Math.abs(l.scaleX)*b.signum(o),l.scaleX=h+(o-h)*a;break;case 3:l.scaleX+=(o-l.data.scaleX)*a}}}},z=class extends M{constructor(t,e,s){super(t,e,P.scaleY+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;if(s<this.frames[0]){switch(r){case 0:l.scaleY=l.data.scaleY;break;case 1:l.scaleY+=(l.data.scaleY-l.scaleY)*a}return}let o=this.getCurveValue(s)*l.data.scaleY;if(1==a)3==r?l.scaleY+=o-l.data.scaleY:l.scaleY=o;else{let h=0;if(1==n)switch(r){case 0:h=l.data.scaleY,l.scaleY=h+(Math.abs(o)*b.signum(h)-h)*a;break;case 1:case 2:h=l.scaleY,l.scaleY=h+(Math.abs(o)*b.signum(h)-h)*a;break;case 3:l.scaleY+=(o-l.data.scaleY)*a}else switch(r){case 0:h=Math.abs(l.data.scaleY)*b.signum(o),l.scaleY=h+(o-h)*a;break;case 1:case 2:h=Math.abs(l.scaleY)*b.signum(o),l.scaleY=h+(o-h)*a;break;case 3:l.scaleY+=(o-l.data.scaleY)*a}}}},j=class extends L{constructor(t,e,s){super(t,e,P.shearX+"|"+s,P.shearY+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;let o=this.frames;if(s<o[0]){switch(r){case 0:l.shearX=l.data.shearX,l.shearY=l.data.shearY;break;case 1:l.shearX+=(l.data.shearX-l.shearX)*a,l.shearY+=(l.data.shearY-l.shearY)*a}return}let h=0,c=0,d=V.search(o,s,3),u=this.curves[d/3];switch(u){case 0:let m=o[d];h=o[d+1],c=o[d+2];let $=(s-m)/(o[d+3]-m);h+=(o[d+3+1]-h)*$,c+=(o[d+3+2]-c)*$;break;case 1:h=o[d+1],c=o[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}switch(r){case 0:l.shearX=l.data.shearX+h*a,l.shearY=l.data.shearY+c*a;break;case 1:case 2:l.shearX+=(l.data.shearX+h-l.shearX)*a,l.shearY+=(l.data.shearY+c-l.shearY)*a;break;case 3:l.shearX+=h*a,l.shearY+=c*a}}},H=class extends M{constructor(t,e,s){super(t,e,P.shearX+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;if(s<this.frames[0]){switch(r){case 0:l.shearX=l.data.shearX;break;case 1:l.shearX+=(l.data.shearX-l.shearX)*a}return}let o=this.getCurveValue(s);switch(r){case 0:l.shearX=l.data.shearX+o*a;break;case 1:case 2:l.shearX+=(l.data.shearX+o-l.shearX)*a;break;case 3:l.shearX+=o*a}}},G=class extends M{constructor(t,e,s){super(t,e,P.shearY+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,a,r,n){let l=t.bones[this.boneIndex];if(!l.active)return;if(s<this.frames[0]){switch(r){case 0:l.shearY=l.data.shearY;break;case 1:l.shearY+=(l.data.shearY-l.shearY)*a}return}let o=this.getCurveValue(s);switch(r){case 0:l.shearY=l.data.shearY+o*a;break;case 1:case 2:l.shearY+=(l.data.shearY+o-l.shearY)*a;break;case 3:l.shearY+=o*a}}},J=class extends D{constructor(t,e,s){super(t,e,[P.rgb+"|"+s,P.alpha+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 5}setFrame(t,e,s,i,a,r){t*=5,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=a,this.frames[t+4]=r}apply(t,e,s,i,a,r,n){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let o=this.frames,h=l.color;if(s<o[0]){let c=l.data.color;switch(r){case 0:h.setFromColor(c);break;case 1:h.add((c.r-h.r)*a,(c.g-h.g)*a,(c.b-h.b)*a,(c.a-h.a)*a)}return}let d=0,u=0,m=0,$=0,f=V.search(o,s,5),g=this.curves[f/5];switch(g){case 0:let p=o[f];d=o[f+1],u=o[f+2],m=o[f+3],$=o[f+4];let _=(s-p)/(o[f+5]-p);d+=(o[f+5+1]-d)*_,u+=(o[f+5+2]-u)*_,m+=(o[f+5+3]-m)*_,$+=(o[f+5+4]-$)*_;break;case 1:d=o[f+1],u=o[f+2],m=o[f+3],$=o[f+4];break;default:d=this.getBezierValue(s,f,1,g-2),u=this.getBezierValue(s,f,2,g+18-2),m=this.getBezierValue(s,f,3,g+36-2),$=this.getBezierValue(s,f,4,g+54-2)}1==a?h.set(d,u,m,$):(0==r&&h.setFromColor(l.data.color),h.add((d-h.r)*a,(u-h.g)*a,(m-h.b)*a,($-h.a)*a))}},Q=class extends D{constructor(t,e,s){super(t,e,[P.rgb+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,a){t<<=2,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=a}apply(t,e,s,i,a,r,n){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let o=this.frames,h=l.color;if(s<o[0]){let c=l.data.color;switch(r){case 0:h.r=c.r,h.g=c.g,h.b=c.b;break;case 1:h.r+=(c.r-h.r)*a,h.g+=(c.g-h.g)*a,h.b+=(c.b-h.b)*a}return}let d=0,u=0,m=0,$=V.search(o,s,4),f=this.curves[$>>2];switch(f){case 0:let g=o[$];d=o[$+1],u=o[$+2],m=o[$+3];let p=(s-g)/(o[$+4]-g);d+=(o[$+4+1]-d)*p,u+=(o[$+4+2]-u)*p,m+=(o[$+4+3]-m)*p;break;case 1:d=o[$+1],u=o[$+2],m=o[$+3];break;default:d=this.getBezierValue(s,$,1,f-2),u=this.getBezierValue(s,$,2,f+18-2),m=this.getBezierValue(s,$,3,f+36-2)}if(1==a)h.r=d,h.g=u,h.b=m;else{if(0==r){let _=l.data.color;h.r=_.r,h.g=_.g,h.b=_.b}h.r+=(d-h.r)*a,h.g+=(u-h.g)*a,h.b+=(m-h.b)*a}}},Z=class extends M{constructor(t,e,s){super(t,e,P.alpha+"|"+s),this.slotIndex=0,this.slotIndex=s}apply(t,e,s,i,a,r,n){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let o=l.color;if(s<this.frames[0]){let h=l.data.color;switch(r){case 0:o.a=h.a;break;case 1:o.a+=(h.a-o.a)*a}return}let c=this.getCurveValue(s);1==a?o.a=c:(0==r&&(o.a=l.data.color.a),o.a+=(c-o.a)*a)}},K=class extends D{constructor(t,e,s){super(t,e,[P.rgb+"|"+s,P.alpha+"|"+s,P.rgb2+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 8}setFrame(t,e,s,i,a,r,n,l,o){t<<=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=a,this.frames[t+4]=r,this.frames[t+5]=n,this.frames[t+6]=l,this.frames[t+7]=o}apply(t,e,s,i,a,r,n){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let o=this.frames,h=l.color,c=l.darkColor;if(s<o[0]){let d=l.data.color,u=l.data.darkColor;switch(r){case 0:h.setFromColor(d),c.r=u.r,c.g=u.g,c.b=u.b;break;case 1:h.add((d.r-h.r)*a,(d.g-h.g)*a,(d.b-h.b)*a,(d.a-h.a)*a),c.r+=(u.r-c.r)*a,c.g+=(u.g-c.g)*a,c.b+=(u.b-c.b)*a}return}let m=0,$=0,f=0,g=0,p=0,_=0,x=0,b=V.search(o,s,8),w=this.curves[b>>3];switch(w){case 0:let y=o[b];m=o[b+1],$=o[b+2],f=o[b+3],g=o[b+4],p=o[b+5],_=o[b+6],x=o[b+7];let k=(s-y)/(o[b+8]-y);m+=(o[b+8+1]-m)*k,$+=(o[b+8+2]-$)*k,f+=(o[b+8+3]-f)*k,g+=(o[b+8+4]-g)*k,p+=(o[b+8+5]-p)*k,_+=(o[b+8+6]-_)*k,x+=(o[b+8+7]-x)*k;break;case 1:m=o[b+1],$=o[b+2],f=o[b+3],g=o[b+4],p=o[b+5],_=o[b+6],x=o[b+7];break;default:m=this.getBezierValue(s,b,1,w-2),$=this.getBezierValue(s,b,2,w+18-2),f=this.getBezierValue(s,b,3,w+36-2),g=this.getBezierValue(s,b,4,w+54-2),p=this.getBezierValue(s,b,5,w+72-2),_=this.getBezierValue(s,b,6,w+90-2),x=this.getBezierValue(s,b,7,w+108-2)}if(1==a)h.set(m,$,f,g),c.r=p,c.g=_,c.b=x;else{if(0==r){h.setFromColor(l.data.color);let S=l.data.darkColor;c.r=S.r,c.g=S.g,c.b=S.b}h.add((m-h.r)*a,($-h.g)*a,(f-h.b)*a,(g-h.a)*a),c.r+=(p-c.r)*a,c.g+=(_-c.g)*a,c.b+=(x-c.b)*a}}},tt=class extends D{constructor(t,e,s){super(t,e,[P.rgb+"|"+s,P.rgb2+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,a,r,n,l){t*=7,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=a,this.frames[t+4]=r,this.frames[t+5]=n,this.frames[t+6]=l}apply(t,e,s,i,a,r,n){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let o=this.frames,h=l.color,c=l.darkColor;if(s<o[0]){let d=l.data.color,u=l.data.darkColor;switch(r){case 0:h.r=d.r,h.g=d.g,h.b=d.b,c.r=u.r,c.g=u.g,c.b=u.b;break;case 1:h.r+=(d.r-h.r)*a,h.g+=(d.g-h.g)*a,h.b+=(d.b-h.b)*a,c.r+=(u.r-c.r)*a,c.g+=(u.g-c.g)*a,c.b+=(u.b-c.b)*a}return}let m=0,$=0,f=0,g=0,p=0,_=0,x=V.search(o,s,7),b=this.curves[x/7];switch(b){case 0:let w=o[x];m=o[x+1],$=o[x+2],f=o[x+3],g=o[x+4],p=o[x+5],_=o[x+6];let y=(s-w)/(o[x+7]-w);m+=(o[x+7+1]-m)*y,$+=(o[x+7+2]-$)*y,f+=(o[x+7+3]-f)*y,g+=(o[x+7+4]-g)*y,p+=(o[x+7+5]-p)*y,_+=(o[x+7+6]-_)*y;break;case 1:m=o[x+1],$=o[x+2],f=o[x+3],g=o[x+4],p=o[x+5],_=o[x+6];break;default:m=this.getBezierValue(s,x,1,b-2),$=this.getBezierValue(s,x,2,b+18-2),f=this.getBezierValue(s,x,3,b+36-2),g=this.getBezierValue(s,x,4,b+54-2),p=this.getBezierValue(s,x,5,b+72-2),_=this.getBezierValue(s,x,6,b+90-2)}if(1==a)h.r=m,h.g=$,h.b=f,c.r=g,c.g=p,c.b=_;else{if(0==r){let k=l.data.color,S=l.data.darkColor;h.r=k.r,h.g=k.g,h.b=k.b,c.r=S.r,c.g=S.g,c.b=S.b}h.r+=(m-h.r)*a,h.g+=($-h.g)*a,h.b+=(f-h.b)*a,c.r+=(g-c.r)*a,c.g+=(p-c.g)*a,c.b+=(_-c.b)*a}}},te=class extends V{constructor(t,e){super(t,[P.attachment+"|"+e]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,i,a,r,n){let l=t.slots[this.slotIndex];if(l.bone.active){if(1==n){0==r&&this.setAttachment(t,l,l.data.attachmentName);return}if(s<this.frames[0]){(0==r||1==r)&&this.setAttachment(t,l,l.data.attachmentName);return}this.setAttachment(t,l,this.attachmentNames[V.search1(this.frames,s)])}}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}},ts=class extends D{constructor(t,e,s,i){super(t,e,[P.deform+"|"+s+"|"+i.id]),this.slotIndex=0,this.attachment=null,this.vertices=null,this.slotIndex=s,this.attachment=i,this.vertices=Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,i,a,r,n,l,o,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);let m=(i-2*r+l)*.03,$=.03*o-.06*n,f=((r-l)*3-i+h)*.006,g=(n-o+.33333333)*.018,p=2*m+f,_=2*$+g,x=(r-i)*.3+m+.16666667*f,b=.3*n+$+.16666667*g,w=i+x,y=b;for(let k=u+18;u<k;u+=2)d[u]=w,d[u+1]=y,x+=p,b+=_,p+=f,_+=g,w+=x,y+=b}getCurvePercent(t,e){let s=this.curves,i=s[e];switch(i){case 0:let a=this.frames[e];return(t-a)/(this.frames[e+this.getFrameEntries()]-a);case 1:return 0}if(s[i-=2]>t){let r=this.frames[e];return s[i+1]*(t-r)/(s[i]-r)}let n=i+18;for(i+=2;i<n;i+=2)if(s[i]>=t){let l=s[i-2],o=s[i-1];return o+(t-l)/(s[i]-l)*(s[i+1]-o)}let h=s[n-2],c=s[n-1];return c+(1-c)*(t-h)/(this.frames[e+this.getFrameEntries()]-h)}apply(t,e,s,i,a,r,n){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let o=l.getAttachment();if(!(o instanceof B)||o.deformAttachment!=this.attachment)return;let h=l.deform;0==h.length&&(r=0);let c=this.vertices,d=c[0].length,u=this.frames;if(s<u[0]){let m=o;switch(r){case 0:h.length=0;break;case 1:if(1==a){h.length=0;break}if(h.length=d,m.bones){a=1-a;for(var $=0;$<d;$++)h[$]*=a}else{let f=m.vertices;for(var $=0;$<d;$++)h[$]+=(f[$]-h[$])*a}}return}if(h.length=d,s>=u[u.length-1]){let g=c[u.length-1];if(1==a){if(3==r){let p=o;if(p.bones)for(let _=0;_<d;_++)h[_]+=g[_];else{let x=p.vertices;for(let b=0;b<d;b++)h[b]+=g[b]-x[b]}}else I.arrayCopy(g,0,h,0,d)}else switch(r){case 0:{let w=o;if(w.bones)for(let y=0;y<d;y++)h[y]=g[y]*a;else{let k=w.vertices;for(let S=0;S<d;S++){let Y=k[S];h[S]=Y+(g[S]-Y)*a}}break}case 1:case 2:for(let v=0;v<d;v++)h[v]+=(g[v]-h[v])*a;break;case 3:let C=o;if(C.bones)for(let A=0;A<d;A++)h[A]+=g[A]*a;else{let X=C.vertices;for(let T=0;T<d;T++)h[T]+=(g[T]-X[T])*a}}return}let F=V.search1(u,s),R=this.getCurvePercent(s,F),P=c[F],D=c[F+1];if(1==a){if(3==r){let M=o;if(M.bones)for(let L=0;L<d;L++){let E=P[L];h[L]+=E+(D[L]-E)*R}else{let N=M.vertices;for(let U=0;U<d;U++){let W=P[U];h[U]+=W+(D[U]-W)*R-N[U]}}}else for(let O=0;O<d;O++){let q=P[O];h[O]=q+(D[O]-q)*R}}else switch(r){case 0:{let z=o;if(z.bones)for(let j=0;j<d;j++){let H=P[j];h[j]=(H+(D[j]-H)*R)*a}else{let G=z.vertices;for(let J=0;J<d;J++){let Q=P[J],Z=G[J];h[J]=Z+(Q+(D[J]-Q)*R-Z)*a}}break}case 1:case 2:for(let K=0;K<d;K++){let tt=P[K];h[K]+=(tt+(D[K]-tt)*R-h[K])*a}break;case 3:let te=o;if(te.bones)for(let ts=0;ts<d;ts++){let ti=P[ts];h[ts]+=(ti+(D[ts]-ti)*R)*a}else{let ta=te.vertices;for(let tr=0;tr<d;tr++){let tn=P[tr];h[tr]+=(tn+(D[tr]-tn)*R-ta[tr])*a}}}}},ti=class extends V{constructor(t){super(t,ti.propertyIds),this.events=null,this.events=Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,i,a,r,n){if(!i)return;let l=this.frames,o=this.frames.length;if(e>s)this.apply(t,e,Number.MAX_VALUE,i,a,r,n),e=-1;else if(e>=l[o-1])return;if(s<l[0])return;let h=0;if(e<l[0])h=0;else{let c=l[h=V.search1(l,e)+1];for(;h>0&&l[h-1]==c;)h--}for(;h<o&&s>=l[h];h++)i.push(this.events[h])}},ta=ti;ta.propertyIds=[""+P.event];var tr=class extends V{constructor(t){super(t,tr.propertyIds),this.drawOrders=null,this.drawOrders=Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,i,a,r,n){if(1==n){0==r&&I.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(s<this.frames[0]){(0==r||1==r)&&I.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let l=this.drawOrders[V.search1(this.frames,s)];if(l){let o=t.drawOrder,h=t.slots;for(let c=0,d=l.length;c<d;c++)o[c]=h[l[c]]}else I.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}},tn=tr;tn.propertyIds=[""+P.drawOrder];var tl=class extends D{constructor(t,e,s){super(t,e,[P.ikConstraint+"|"+s]),this.ikConstraintIndex=0,this.ikConstraintIndex=s}getFrameEntries(){return 6}setFrame(t,e,s,i,a,r,n){t*=6,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=a,this.frames[t+4]=r?1:0,this.frames[t+5]=n?1:0}apply(t,e,s,i,a,r,n){let l=t.ikConstraints[this.ikConstraintIndex];if(!l.active)return;let o=this.frames;if(s<o[0]){switch(r){case 0:l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch;break;case 1:l.mix+=(l.data.mix-l.mix)*a,l.softness+=(l.data.softness-l.softness)*a,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}return}let h=0,c=0,d=V.search(o,s,6),u=this.curves[d/6];switch(u){case 0:let m=o[d];h=o[d+1],c=o[d+2];let $=(s-m)/(o[d+6]-m);h+=(o[d+6+1]-h)*$,c+=(o[d+6+2]-c)*$;break;case 1:h=o[d+1],c=o[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}0==r?(l.mix=l.data.mix+(h-l.data.mix)*a,l.softness=l.data.softness+(c-l.data.softness)*a,1==n?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=o[d+3],l.compress=0!=o[d+4],l.stretch=0!=o[d+5])):(l.mix+=(h-l.mix)*a,l.softness+=(c-l.softness)*a,0==n&&(l.bendDirection=o[d+3],l.compress=0!=o[d+4],l.stretch=0!=o[d+5]))}},to=class extends D{constructor(t,e,s){super(t,e,[P.transformConstraint+"|"+s]),this.transformConstraintIndex=0,this.transformConstraintIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,a,r,n,l){let o=this.frames;o[t*=7]=e,o[t+1]=s,o[t+2]=i,o[t+3]=a,o[t+4]=r,o[t+5]=n,o[t+6]=l}apply(t,e,s,i,a,r,n){let l=t.transformConstraints[this.transformConstraintIndex];if(!l.active)return;let o=this.frames;if(s<o[0]){let h=l.data;switch(r){case 0:l.mixRotate=h.mixRotate,l.mixX=h.mixX,l.mixY=h.mixY,l.mixScaleX=h.mixScaleX,l.mixScaleY=h.mixScaleY,l.mixShearY=h.mixShearY;break;case 1:l.mixRotate+=(h.mixRotate-l.mixRotate)*a,l.mixX+=(h.mixX-l.mixX)*a,l.mixY+=(h.mixY-l.mixY)*a,l.mixScaleX+=(h.mixScaleX-l.mixScaleX)*a,l.mixScaleY+=(h.mixScaleY-l.mixScaleY)*a,l.mixShearY+=(h.mixShearY-l.mixShearY)*a}return}let c,d,u,m,$,f,g=V.search(o,s,7),p=this.curves[g/7];switch(p){case 0:let _=o[g];c=o[g+1],d=o[g+2],u=o[g+3],m=o[g+4],$=o[g+5],f=o[g+6];let x=(s-_)/(o[g+7]-_);c+=(o[g+7+1]-c)*x,d+=(o[g+7+2]-d)*x,u+=(o[g+7+3]-u)*x,m+=(o[g+7+4]-m)*x,$+=(o[g+7+5]-$)*x,f+=(o[g+7+6]-f)*x;break;case 1:c=o[g+1],d=o[g+2],u=o[g+3],m=o[g+4],$=o[g+5],f=o[g+6];break;default:c=this.getBezierValue(s,g,1,p-2),d=this.getBezierValue(s,g,2,p+18-2),u=this.getBezierValue(s,g,3,p+36-2),m=this.getBezierValue(s,g,4,p+54-2),$=this.getBezierValue(s,g,5,p+72-2),f=this.getBezierValue(s,g,6,p+90-2)}if(0==r){let b=l.data;l.mixRotate=b.mixRotate+(c-b.mixRotate)*a,l.mixX=b.mixX+(d-b.mixX)*a,l.mixY=b.mixY+(u-b.mixY)*a,l.mixScaleX=b.mixScaleX+(m-b.mixScaleX)*a,l.mixScaleY=b.mixScaleY+($-b.mixScaleY)*a,l.mixShearY=b.mixShearY+(f-b.mixShearY)*a}else l.mixRotate+=(c-l.mixRotate)*a,l.mixX+=(d-l.mixX)*a,l.mixY+=(u-l.mixY)*a,l.mixScaleX+=(m-l.mixScaleX)*a,l.mixScaleY+=($-l.mixScaleY)*a,l.mixShearY+=(f-l.mixShearY)*a}},th=class extends M{constructor(t,e,s){super(t,e,P.pathConstraintPosition+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,a,r,n){let l=t.pathConstraints[this.pathConstraintIndex];if(!l.active)return;if(s<this.frames[0]){switch(r){case 0:l.position=l.data.position;break;case 1:l.position+=(l.data.position-l.position)*a}return}let o=this.getCurveValue(s);0==r?l.position=l.data.position+(o-l.data.position)*a:l.position+=(o-l.position)*a}},tc=class extends M{constructor(t,e,s){super(t,e,P.pathConstraintSpacing+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,a,r,n){let l=t.pathConstraints[this.pathConstraintIndex];if(!l.active)return;if(s<this.frames[0]){switch(r){case 0:l.spacing=l.data.spacing;break;case 1:l.spacing+=(l.data.spacing-l.spacing)*a}return}let o=this.getCurveValue(s);0==r?l.spacing=l.data.spacing+(o-l.data.spacing)*a:l.spacing+=(o-l.spacing)*a}},td=class extends D{constructor(t,e,s){super(t,e,[P.pathConstraintMix+"|"+s]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,a){let r=this.frames;r[t<<=2]=e,r[t+1]=s,r[t+2]=i,r[t+3]=a}apply(t,e,s,i,a,r,n){let l=t.pathConstraints[this.pathConstraintIndex];if(!l.active)return;let o=this.frames;if(s<o[0]){switch(r){case 0:l.mixRotate=l.data.mixRotate,l.mixX=l.data.mixX,l.mixY=l.data.mixY;break;case 1:l.mixRotate+=(l.data.mixRotate-l.mixRotate)*a,l.mixX+=(l.data.mixX-l.mixX)*a,l.mixY+=(l.data.mixY-l.mixY)*a}return}let h,c,d,u=V.search(o,s,4),m=this.curves[u>>2];switch(m){case 0:let $=o[u];h=o[u+1],c=o[u+2],d=o[u+3];let f=(s-$)/(o[u+4]-$);h+=(o[u+4+1]-h)*f,c+=(o[u+4+2]-c)*f,d+=(o[u+4+3]-d)*f;break;case 1:h=o[u+1],c=o[u+2],d=o[u+3];break;default:h=this.getBezierValue(s,u,1,m-2),c=this.getBezierValue(s,u,2,m+18-2),d=this.getBezierValue(s,u,3,m+36-2)}if(0==r){let g=l.data;l.mixRotate=g.mixRotate+(h-g.mixRotate)*a,l.mixX=g.mixX+(c-g.mixX)*a,l.mixY=g.mixY+(d-g.mixY)*a}else l.mixRotate+=(h-l.mixRotate)*a,l.mixX+=(c-l.mixX)*a,l.mixY+=(d-l.mixY)*a}},tu=class{constructor(t){this.data=null,this.tracks=[],this.timeScale=1,this.unkeyedState=0,this.events=[],this.listeners=[],this.queue=new t$(this),this.propertyIDs=new g,this.animationsChanged=!1,this.trackEntryPool=new v(()=>new tm),this.data=t}static emptyAnimation(){return ty||(ty=new R("<empty>",[],0)),ty}update(t){t*=this.timeScale;let e=this.tracks;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(!a)continue;a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;let r=t*a.timeScale;if(a.delay>0){if(a.delay-=r,a.delay>0)continue;r=-a.delay,a.delay=0}let n=a.next;if(n){let l=a.trackLast-n.delay;if(l>=0){for(n.delay=0,n.trackTime+=0==a.timeScale?0:(l/a.timeScale+t)*n.timeScale,a.trackTime+=r,this.setCurrent(s,n,!0);n.mixingFrom;)n.mixTime+=t,n=n.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&!a.mixingFrom){e[s]=null,this.queue.end(a),this.clearNext(a);continue}if(a.mixingFrom&&this.updateMixingFrom(a,t)){let o=a.mixingFrom;for(a.mixingFrom=null,o&&(o.mixingTo=null);o;)this.queue.end(o),o=o.mixingFrom}a.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let s=t.mixingFrom;if(!s)return!0;let i=this.updateMixingFrom(s,e);return(s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration)?((0==s.totalAlpha||0==t.mixDuration)&&(t.mixingFrom=s.mixingFrom,s.mixingFrom&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),i):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(s){if(!s)throw Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let i=this.events,a=this.tracks,r=!1;for(let n=0,l=a.length;n<l;n++){let o=a[n];if(!o||o.delay>0)continue;r=!0;let h=0==n?t.first:o.mixBlend,c=o.alpha;o.mixingFrom?c*=this.applyMixingFrom(o,s,h):o.trackTime>=o.trackEnd&&!o.next&&(c=0);let d=o.animationLast,u=o.getAnimationTime(),m=u,$=i;o.reverse&&(m=o.animation.duration-m,$=null);let f=o.animation.timelines,g=f.length;if(0==n&&1==c||h==t.add)for(let p=0;p<g;p++){I.webkit602BugfixHelper(c,h);var _=f[p];_ instanceof te?this.applyAttachmentTimeline(_,s,m,h,!0):_.apply(s,d,m,$,c,h,e.mixIn)}else{let x=o.timelineMode,b=o.timelinesRotation.length!=g<<1;b&&(o.timelinesRotation.length=g<<1);for(let w=0;w<g;w++){let y=f[w],k=x[w]==tg?h:t.setup;y instanceof E?this.applyRotateTimeline(y,s,m,c,k,o.timelinesRotation,w<<1,b):y instanceof te?this.applyAttachmentTimeline(y,s,m,h,!0):(I.webkit602BugfixHelper(c,h),y.apply(s,d,m,$,c,k,e.mixIn))}}this.queueEvents(o,u),i.length=0,o.nextAnimationLast=u,o.nextTrackLast=o.trackTime}for(var S=this.unkeyedState+tw,Y=s.slots,v=0,C=s.slots.length;v<C;v++){var A=Y[v];if(A.attachmentState==S){var X=A.data.attachmentName;A.setAttachment(X?s.getAttachment(A.data.index,X):null)}}return this.unkeyedState+=2,this.queue.drain(),r}applyMixingFrom(s,i,a){let r=s.mixingFrom;r.mixingFrom&&this.applyMixingFrom(r,i,a);let n=0;0==s.mixDuration?(n=1,a==t.first&&(a=t.setup)):((n=s.mixTime/s.mixDuration)>1&&(n=1),a!=t.first&&(a=r.mixBlend));let l=n<r.attachmentThreshold,o=n<r.drawOrderThreshold,h=r.animation.timelines,c=h.length,d=r.alpha*s.interruptAlpha,u=d*(1-n),m=r.animationLast,$=r.getAnimationTime(),f=$,g=null;if(r.reverse?f=r.animation.duration-f:n<r.eventThreshold&&(g=this.events),a==t.add)for(let p=0;p<c;p++)h[p].apply(i,m,f,g,u,a,e.mixOut);else{let _=r.timelineMode,x=r.timelineHoldMix,b=r.timelinesRotation.length!=c<<1;b&&(r.timelinesRotation.length=c<<1),r.totalAlpha=0;for(let w=0;w<c;w++){let y=h[w],k=e.mixOut,S,Y=0;switch(_[w]){case tg:if(!o&&y instanceof tn)continue;S=a,Y=u;break;case tp:S=t.setup,Y=u;break;case t_:S=a,Y=d;break;case tx:S=t.setup,Y=d;break;default:S=t.setup;let v=x[w];Y=d*Math.max(0,1-v.mixTime/v.mixDuration)}r.totalAlpha+=Y,y instanceof E?this.applyRotateTimeline(y,i,f,Y,S,r.timelinesRotation,w<<1,b):y instanceof te?this.applyAttachmentTimeline(y,i,f,S,l):(I.webkit602BugfixHelper(Y,a),o&&y instanceof tn&&S==t.setup&&(k=e.mixIn),y.apply(i,m,f,g,Y,S,k))}}return s.mixDuration>0&&this.queueEvents(r,$),this.events.length=0,r.nextAnimationLast=$,r.nextTrackLast=r.trackTime,n}applyAttachmentTimeline(e,s,i,a,r){var n=s.slots[e.slotIndex];n.bone.active&&(i<e.frames[0]?(a==t.setup||a==t.first)&&this.setAttachment(s,n,n.data.attachmentName,r):this.setAttachment(s,n,e.attachmentNames[V.search1(e.frames,i)],r),n.attachmentState<=this.unkeyedState&&(n.attachmentState=this.unkeyedState+tw))}setAttachment(t,e,s,i){e.setAttachment(s?t.getAttachment(e.data.index,s):null),i&&(e.attachmentState=this.unkeyedState+t0)}applyRotateTimeline(s,i,a,r,n,l,o,h){if(h&&(l[o]=0),1==r){s.apply(i,0,a,null,1,n,e.mixIn);return}let c=i.bones[s.boneIndex];if(!c.active)return;let d=s.frames,u=0,m=0;if(a<d[0])switch(n){case t.setup:c.rotation=c.data.rotation;default:return;case t.first:u=c.rotation,m=c.data.rotation}else u=n==t.setup?c.data.rotation:c.rotation,m=c.data.rotation+s.getCurveValue(a);let $=0,f=m-u;if(0==(f-=(16384-(16384.499999999996-f/360|0))*360))$=l[o];else{let g=0,p=0;h?(g=0,p=f):(g=l[o],p=l[o+1]);let _=f>0,x=g>=0;b.signum(p)!=b.signum(f)&&90>=Math.abs(p)&&(Math.abs(g)>180&&(g+=360*b.signum(g)),x=_),$=f+g-g%360,x!=_&&($+=360*b.signum(g)),l[o]=$}l[o+1]=f,c.rotation=u+$*r}queueEvents(t,e){let s=t.animationStart,i=t.animationEnd,a=i-s,r=t.trackLast%a,n=this.events,l=0,o=n.length;for(;l<o;l++){let h=n[l];if(h.time<r)break;h.time>i||this.queue.event(t,h)}let c=!1;for((c=t.loop?0==a||r>t.trackTime%a:e>=i&&t.animationLast<i)&&this.queue.complete(t);l<o;l++){let d=n[l];d.time<s||this.queue.event(t,d)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let s=e;for(;;){let i=s.mixingFrom;if(!i)break;this.queue.end(i),s.mixingFrom=null,s.mixingTo=null,s=i}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,s){let i=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,i&&(s&&this.queue.interrupt(i),e.mixingFrom=i,i.mixingTo=e,e.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s=!1){let i=this.data.skeletonData.findAnimation(e);if(!i)throw Error("Animation not found: "+e);return this.setAnimationWith(t,i,s)}setAnimationWith(t,e,s=!1){if(!e)throw Error("animation cannot be null.");let i=!0,a=this.expandToIndex(t);a&&(-1==a.nextTrackLast?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.clearNext(a),a=a.mixingFrom,i=!1):this.clearNext(a));let r=this.trackEntry(t,e,s,a);return this.setCurrent(t,r,i),this.queue.drain(),r}addAnimation(t,e,s=!1,i=0){let a=this.data.skeletonData.findAnimation(e);if(!a)throw Error("Animation not found: "+e);return this.addAnimationWith(t,a,s,i)}addAnimationWith(t,e,s=!1,i=0){if(!e)throw Error("animation cannot be null.");let a=this.expandToIndex(t);if(a)for(;a.next;)a=a.next;let r=this.trackEntry(t,e,s,a);return a?(a.next=r,r.previous=a,i<=0&&(i+=a.getTrackComplete()-r.mixDuration)):(this.setCurrent(t,r,!0),this.queue.drain()),r.delay=i,r}setEmptyAnimation(t,e=0){let s=this.setAnimationWith(t,tu.emptyAnimation(),!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t,e=0,s=0){let i=this.addAnimationWith(t,tu.emptyAnimation(),!1,s);return s<=0&&(i.delay+=i.mixDuration-e),i.mixDuration=e,i.trackEnd=e,i}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let s=0,i=this.tracks.length;s<i;s++){let a=this.tracks[s];a&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(I.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(e,s,i,a){let r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=e,r.animation=s,r.loop=i,r.holdPrevious=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=s.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=a?this.data.getMix(a.animation,s):0,r.mixBlend=t.replace,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let e=this.tracks;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a){for(;a.mixingFrom;)a=a.mixingFrom;do a.mixingTo&&a.mixBlend==t.add||this.computeHold(a),a=a.mixingTo;while(a)}}}computeHold(t){let e=t.mixingTo,s=t.animation.timelines,i=t.animation.timelines.length,a=t.timelineMode;a.length=i;let r=t.timelineHoldMix;r.length=0;let n=this.propertyIDs;if(e&&e.holdPrevious){for(let l=0;l<i;l++)a[l]=n.addAll(s[l].getPropertyIds())?tx:t_;return}outer:for(let o=0;o<i;o++){let h=s[o],c=h.getPropertyIds();if(n.addAll(c)){if(!e||h instanceof te||h instanceof tn||h instanceof ta||!e.animation.hasTimeline(c))a[o]=tp;else{for(let d=e.mixingTo;d;d=d.mixingTo)if(!d.animation.hasTimeline(c)){if(t.mixDuration>0){a[o]=tb,r[o]=d;continue outer}break}a[o]=tx}}else a[o]=tg}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}},tm=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=t.replace,this.timelineMode=[],this.timelineHoldMix=[],this.timelinesRotation=[]}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},t$=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=null,this.animState=t}start(t){this.objects.push(s.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(s.interrupt),this.objects.push(t)}end(t){this.objects.push(s.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(s.dispose),this.objects.push(t)}complete(t){this.objects.push(s.complete),this.objects.push(t)}event(t,e){this.objects.push(s.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let a=t[i],r=t[i+1];switch(a){case s.start:r.listener&&r.listener.start&&r.listener.start(r);for(let n=0;n<e.length;n++)e[n].start&&e[n].start(r);break;case s.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let l=0;l<e.length;l++)e[l].interrupt&&e[l].interrupt(r);break;case s.end:r.listener&&r.listener.end&&r.listener.end(r);for(let o=0;o<e.length;o++)e[o].end&&e[o].end(r);case s.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let h=0;h<e.length;h++)e[h].dispose&&e[h].dispose(r);this.animState.trackEntryPool.free(r);break;case s.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(let c=0;c<e.length;c++)e[c].complete&&e[c].complete(r);break;case s.event:let d=t[i+++2];r.listener&&r.listener.event&&r.listener.event(r,d);for(let u=0;u<e.length;u++)e[u].event&&e[u].event(r,d)}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(s||(s={}));var tf=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},tg=0,tp=1,t_=2,tx=3,tb=4,tw=1,t0=2,ty=null,tk=class{constructor(t){if(this.skeletonData=null,this.animationToMixTime={},this.defaultMix=0,!t)throw Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){let i=this.skeletonData.findAnimation(t);if(!i)throw Error("Animation not found: "+t);let a=this.skeletonData.findAnimation(e);if(!a)throw Error("Animation not found: "+e);this.setMixWith(i,a,s)}setMixWith(t,e,s){if(!t)throw Error("from cannot be null.");if(!e)throw Error("to cannot be null.");let i=t.name+"."+e.name;this.animationToMixTime[i]=s}getMix(t,e){let s=t.name+"."+e.name,i=this.animationToMixTime[s];return void 0===i?this.defaultMix:i}},tS=class extends B{constructor(t){super(t),this.color=new _(1,1,1,1)}copy(){let t=new tS(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},tI=class extends B{constructor(t){super(t),this.endSlot=null,this.color=new _(.2275,.2275,.8078,1)}copy(){let t=new tI(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},tY=class{constructor(t){this._image=t}getImage(){return this._image}};!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i||(i={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(a||(a={}));var tv=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}},tC=class extends tY{setFilters(t,e){}setWraps(t,e){}dispose(){}},tA=class{constructor(t){this.pages=[],this.regions=[];let e=new tX(t),s=[,,,,],r=null,n=null,l={};l.size=()=>{r.width=parseInt(s[1]),r.height=parseInt(s[2])},l.format=()=>{},l.filter=()=>{r.minFilter=I.enumValue(i,s[1]),r.magFilter=I.enumValue(i,s[2])},l.repeat=()=>{-1!=s[1].indexOf("x")&&(r.uWrap=a.Repeat),-1!=s[1].indexOf("y")&&(r.vWrap=a.Repeat)},l.pma=()=>{r.pma="true"==s[1]};var o={};o.xy=()=>{n.x=parseInt(s[1]),n.y=parseInt(s[2])},o.size=()=>{n.width=parseInt(s[1]),n.height=parseInt(s[2])},o.bounds=()=>{n.x=parseInt(s[1]),n.y=parseInt(s[2]),n.width=parseInt(s[3]),n.height=parseInt(s[4])},o.offset=()=>{n.offsetX=parseInt(s[1]),n.offsetY=parseInt(s[2])},o.orig=()=>{n.originalWidth=parseInt(s[1]),n.originalHeight=parseInt(s[2])},o.offsets=()=>{n.offsetX=parseInt(s[1]),n.offsetY=parseInt(s[2]),n.originalWidth=parseInt(s[3]),n.originalHeight=parseInt(s[4])},o.rotate=()=>{let t=s[1];"true"==t?n.degrees=90:"false"!=t&&(n.degrees=parseInt(t))},o.index=()=>{n.index=parseInt(s[1])};let h=e.readLine();for(;h&&0==h.trim().length;)h=e.readLine();for(;h&&0!=h.trim().length&&0!=e.readEntry(s,h);)h=e.readLine();let c=null,d=null;for(;null!==h;)if(0==h.trim().length)r=null,h=e.readLine();else if(r){for((n=new tF).page=r,n.name=h;;){let u=e.readEntry(s,h=e.readLine());if(0==u)break;let m=o[s[0]];if(m)m();else{c||(c=[],d=[]),c.push(s[0]);let $=[];for(let f=0;f<u;f++)$.push(parseInt(s[f+1]));d.push($)}}0==n.originalWidth&&0==n.originalHeight&&(n.originalWidth=n.width,n.originalHeight=n.height),c&&c.length>0&&(n.names=c,n.values=d,c=null,d=null),n.u=n.x/r.width,n.v=n.y/r.height,90==n.degrees?(n.u2=(n.x+n.height)/r.width,n.v2=(n.y+n.width)/r.height):(n.u2=(n.x+n.width)/r.width,n.v2=(n.y+n.height)/r.height),this.regions.push(n)}else{for((r=new tT).name=h.trim();0!=e.readEntry(s,h=e.readLine());){let g=l[s[0]];g&&g()}this.pages.push(r)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let s of this.pages)s.setTexture(t.get(e+s.name))}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()}},tX=class{constructor(t){this.lines=null,this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e||0==(e=e.trim()).length)return 0;let s=e.indexOf(":");if(-1==s)return 0;t[0]=e.substr(0,s).trim();for(let i=1,a=s+1;;i++){let r=e.indexOf(",",a);if(-1==r)return t[i]=e.substr(a).trim(),i;if(t[i]=e.substr(a,r-a).trim(),a=r+1,4==i)return 4}}},tT=class{constructor(){this.name=null,this.minFilter=i.Nearest,this.magFilter=i.Nearest,this.uWrap=a.ClampToEdge,this.vWrap=a.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}},tF=class extends tv{constructor(){super(...arguments),this.page=null,this.name=null,this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null}},t1=class extends B{constructor(t){super(t),this.region=null,this.path=null,this.regionUVs=null,this.uvs=null,this.triangles=null,this.color=new _(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=null,this.parentMesh=null,this.tempColor=new _(0,0,0,0)}updateUVs(){let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=I.newFloatArray(t.length));let e=this.uvs,s=this.uvs.length,i=this.region.u,a=this.region.v,r=0,n=0;if(this.region instanceof tF){let l=this.region,o=l.page.texture.getImage(),h=o.width,c=o.height;switch(l.degrees){case 90:i-=(l.originalHeight-l.offsetY-l.height)/h,a-=(l.originalWidth-l.offsetX-l.width)/c,r=l.originalHeight/h,n=l.originalWidth/c;for(let d=0;d<s;d+=2)e[d]=i+t[d+1]*r,e[d+1]=a+(1-t[d])*n;return;case 180:i-=(l.originalWidth-l.offsetX-l.width)/h,a-=l.offsetY/c,r=l.originalWidth/h,n=l.originalHeight/c;for(let u=0;u<s;u+=2)e[u]=i+(1-t[u])*r,e[u+1]=a+(1-t[u+1])*n;return;case 270:i-=l.offsetY/h,a-=l.offsetX/c,r=l.originalHeight/h,n=l.originalWidth/c;for(let m=0;m<s;m+=2)e[m]=i+(1-t[m+1])*r,e[m+1]=a+t[m]*n;return}i-=l.offsetX/h,a-=(l.originalHeight-l.offsetY-l.height)/c,r=l.originalWidth/h,n=l.originalHeight/c}else this.region?(r=this.region.u2-i,n=this.region.v2-a):(i=a=0,r=n=1);for(let $=0;$<s;$+=2)e[$]=i+t[$]*r,e[$+1]=a+t[$+1]*n}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new t1(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=Array(this.regionUVs.length),I.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=Array(this.uvs.length),I.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=Array(this.triangles.length),I.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=Array(this.edges.length),I.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){let t=new t1(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.updateUVs(),t}},tB=class extends B{constructor(t){super(t),this.lengths=null,this.closed=!1,this.constantSpeed=!1,this.color=new _(1,1,1,1)}copy(){let t=new tB(this.name);return this.copyTo(t),t.lengths=Array(this.lengths.length),I.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},tR=class extends B{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new _(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){let e=b.cosDeg(this.rotation),s=b.sinDeg(this.rotation),i=e*t.a+s*t.b;return Math.atan2(e*t.c+s*t.d,i)*b.radDeg}copy(){let t=new tR(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},tP=class extends T{constructor(t){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new _(1,1,1,1),this.path=null,this.rendererObject=null,this.region=null,this.offset=I.newFloatArray(8),this.uvs=I.newFloatArray(8),this.tempColor=new _(1,1,1,1)}updateOffset(){this.region;let t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*t,i=-this.height/2*this.scaleY+this.region.offsetY*e,a=s+this.region.width*t,r=i+this.region.height*e,n=this.rotation*Math.PI/180,l=Math.cos(n),o=Math.sin(n),h=this.x,c=this.y,d=s*l+h,u=s*o,m=i*l+c,$=i*o,f=a*l+h,g=a*o,p=r*l+c,_=r*o,x=this.offset;x[0]=d-$,x[1]=m+u,x[2]=d-_,x[3]=p+u,x[4]=f-_,x[5]=p+g,x[6]=f-$,x[7]=m+g}setRegion(t){this.region=t;let e=this.uvs;90==t.degrees?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,s,i){let a=this.offset,r=t.worldX,n=t.worldY,l=t.a,o=t.b,h=t.c,c=t.d,d=0,u=0;d=a[0],u=a[1],e[s]=d*l+u*o+r,e[s+1]=d*h+u*c+n,s+=i,d=a[2],u=a[3],e[s]=d*l+u*o+r,e[s+1]=d*h+u*c+n,s+=i,d=a[4],u=a[5],e[s]=d*l+u*o+r,e[s+1]=d*h+u*c+n,s+=i,d=a[6],u=a[7],e[s]=d*l+u*o+r,e[s+1]=d*h+u*c+n}copy(){let t=new tP(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,I.arrayCopy(this.uvs,0,t.uvs,0,8),I.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}},t3=tP;t3.X1=0,t3.Y1=1,t3.C1R=2,t3.C1G=3,t3.C1B=4,t3.C1A=5,t3.U1=6,t3.V1=7,t3.X2=8,t3.Y2=9,t3.C2R=10,t3.C2G=11,t3.C2B=12,t3.C2A=13,t3.U2=14,t3.V2=15,t3.X3=16,t3.Y3=17,t3.C3R=18,t3.C3G=19,t3.C3B=20,t3.C3A=21,t3.U3=22,t3.V3=23,t3.X4=24,t3.Y4=25,t3.C4R=26,t3.C4G=27,t3.C4B=28,t3.C4A=29,t3.U4=30,t3.V4=31;var tV=class{constructor(t){this.atlas=null,this.atlas=t}newRegionAttachment(t,e,s){let i=this.atlas.findRegion(s);if(!i)throw Error("Region not found in atlas: "+s+" (region attachment: "+e+")");i.renderObject=i;let a=new t3(e);return a.setRegion(i),a}newMeshAttachment(t,e,s){let i=this.atlas.findRegion(s);if(!i)throw Error("Region not found in atlas: "+s+" (mesh attachment: "+e+")");i.renderObject=i;let a=new t1(e);return a.region=i,a}newBoundingBoxAttachment(t,e){return new tS(e)}newPathAttachment(t,e){return new tB(e)}newPointAttachment(t,e){return new tR(e)}newClippingAttachment(t,e){return new tI(e)}},t4=class{constructor(t,e,s){if(this.index=0,this.name=null,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=r.Normal,this.skinRequired=!1,this.color=new _,t<0)throw Error("index must be >= 0.");if(!e)throw Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}};!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(r||(r={}));var tD=class{constructor(t,e,s){if(this.data=null,this.skeleton=null,this.parent=null,this.children=[],this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,i,a,n,l){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=i,this.ascaleY=a,this.ashearX=n,this.ashearY=l;let o=this.parent;if(!o){let h=this.skeleton,c=s+90+l,d=h.scaleX,u=h.scaleY;this.a=b.cosDeg(s+n)*i*d,this.b=b.cosDeg(c)*a*d,this.c=b.sinDeg(s+n)*i*u,this.d=b.sinDeg(c)*a*u,this.worldX=t*d+h.x,this.worldY=e*u+h.y;return}let m=o.a,$=o.b,f=o.c,g=o.d;switch(this.worldX=m*t+$*e+o.worldX,this.worldY=f*t+g*e+o.worldY,this.data.transformMode){case r.Normal:{let p=s+90+l,_=b.cosDeg(s+n)*i,x=b.cosDeg(p)*a,w=b.sinDeg(s+n)*i,y=b.sinDeg(p)*a;this.a=m*_+$*w,this.b=m*x+$*y,this.c=f*_+g*w,this.d=f*x+g*y;return}case r.OnlyTranslation:{let k=s+90+l;this.a=b.cosDeg(s+n)*i,this.b=b.cosDeg(k)*a,this.c=b.sinDeg(s+n)*i,this.d=b.sinDeg(k)*a;break}case r.NoRotationOrReflection:{let S=m*m+f*f,I=0;S>1e-4?(S=Math.abs(m*g-$*f)/S,m/=this.skeleton.scaleX,f/=this.skeleton.scaleY,$=f*S,g=m*S,I=Math.atan2(f,m)*b.radDeg):(m=0,f=0,I=90-Math.atan2(g,$)*b.radDeg);let Y=s+n-I,v=s+l-I+90,C=b.cosDeg(Y)*i,A=b.cosDeg(v)*a,X=b.sinDeg(Y)*i,T=b.sinDeg(v)*a;this.a=m*C-$*X,this.b=m*A-$*T,this.c=f*C+g*X,this.d=f*A+g*T;break}case r.NoScale:case r.NoScaleOrReflection:{let F=b.cosDeg(s),B=b.sinDeg(s),R=(m*F+$*B)/this.skeleton.scaleX,P=(f*F+g*B)/this.skeleton.scaleY,V=Math.sqrt(R*R+P*P);V>1e-5&&(V=1/V),R*=V,P*=V,V=Math.sqrt(R*R+P*P),this.data.transformMode==r.NoScale&&m*g-$*f<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(V=-V);let D=Math.PI/2+Math.atan2(P,R),M=Math.cos(D)*V,L=Math.sin(D)*V,E=b.cosDeg(n)*i,N=b.cosDeg(90+l)*a,U=b.sinDeg(n)*i,W=b.sinDeg(90+l)*a;this.a=R*E+M*U,this.b=R*N+M*W,this.c=P*E+L*U,this.d=P*N+L*W}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*b.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*b.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*b.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*b.radDeg;return}let e=t.a,s=t.b,i=t.c,a=t.d,r=1/(e*a-s*i),n=this.worldX-t.worldX,l=this.worldY-t.worldY;this.ax=n*a*r-l*s*r,this.ay=l*e*r-n*i*r;let o=r*a,h=r*e,c=r*s,d=r*i,u=o*this.a-c*this.c,m=o*this.b-c*this.d,$=h*this.c-d*this.a,f=h*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+$*$),this.ascaleX>1e-4){let g=u*f-m*$;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(u*m+$*f,g)*b.radDeg,this.arotation=Math.atan2($,u)*b.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(m*m+f*f),this.ashearY=0,this.arotation=90-Math.atan2(f,m)*b.radDeg}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),s=t.x-this.worldX,i=t.y-this.worldY;return t.x=s*this.d*e-i*this.b*e,t.y=i*this.a*e-s*this.c*e,t}localToWorld(t){let e=t.x,s=t.y;return t.x=e*this.a+s*this.b+this.worldX,t.y=e*this.c+s*this.d+this.worldY,t}worldToLocalRotation(t){let e=b.sinDeg(t),s=b.cosDeg(t);return Math.atan2(this.a*e-this.c*s,this.d*s-this.b*e)*b.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=b.sinDeg(t),s=b.cosDeg(t);return Math.atan2(s*this.c+e*this.d,s*this.a+e*this.b)*b.radDeg}rotateWorld(t){let e=this.a,s=this.b,i=this.c,a=this.d,r=b.cosDeg(t),n=b.sinDeg(t);this.a=r*e-n*i,this.b=r*s-n*a,this.c=n*e+r*i,this.d=n*s+r*a}},t6=class{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}},tM=class{constructor(t,e="",s=null){this.pathPrefix=null,this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=s||new tL}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,s){this.toLoad--,this.loaded++,this.assets[e]=s,t&&t(e,s)}error(t,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,t&&t(e,s)}loadAll(){return new Promise((t,e)=>{let s=()=>{if(this.isLoadingComplete()){this.hasErrors()?e(this.errors):t(this);return}requestAnimationFrame(s)};requestAnimationFrame(s)})}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t,e=null,s=null){t=this.start(t),this.downloader.downloadBinary(t,s=>{this.success(e,t,s)},(e,i)=>{this.error(s,t,`Couldn't load binary ${t}: status ${e}, ${i}`)})}loadText(t,e=null,s=null){t=this.start(t),this.downloader.downloadText(t,s=>{this.success(e,t,s)},(e,i)=>{this.error(s,t,`Couldn't load text ${t}: status ${e}, ${i}`)})}loadJson(t,e=null,s=null){t=this.start(t),this.downloader.downloadJson(t,s=>{this.success(e,t,s)},(e,i)=>{this.error(s,t,`Couldn't load JSON ${t}: status ${e}, ${i}`)})}loadTexture(t,e=null,s=null){t=this.start(t);let i;if("undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document){let a=new Image;a.crossOrigin="anonymous",a.onload=()=>{this.success(e,t,this.textureLoader(a))},a.onerror=()=>{this.error(s,t,`Couldn't load image: ${t}`)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),a.src=t}else fetch(t,{mode:"cors"}).then(e=>e.ok?e.blob():(this.error(s,t,`Couldn't load image: ${t}`),null)).then(t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(s=>{s&&this.success(e,t,this.textureLoader(s))})}loadTextureAtlas(t,e=null,s=null,i=null){let a=t.lastIndexOf("/"),r=a>=0?t.substring(0,a+1):"";t=this.start(t),this.downloader.downloadText(t,a=>{try{let n=new tA(a),l=n.pages.length,o=!1;for(let h of n.pages)this.loadTexture(null==i?r+h.name:i[h.name],(s,i)=>{o||(h.setTexture(i),0==--l&&this.success(e,t,n))},(e,i)=>{o||this.error(s,t,`Couldn't load texture atlas ${t} page image: ${e}`),o=!0})}catch(c){this.error(s,t,`Couldn't parse texture atlas ${t}: ${c.message}`)}},(e,i)=>{this.error(s,t,`Couldn't load texture atlas ${t}: status ${e}, ${i}`)})}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let e=this.assets[t];if(e)return e;let s=this.errors[t];throw Error("Asset not found: "+t+(s?"\n"+s:""))}remove(t){t=this.pathPrefix+t;let e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(let t in this.assets){let e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},tL=class{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(t){if(!t.startsWith("data:"))throw Error("Not a data URI.");let e=t.indexOf("base64,");return -1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),s=e.length,i=new Uint8Array(s),a=0;a<s;a++)i[a]=e.charCodeAt(a);return i}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{let i=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(i))}catch(a){this.finish(t,400,JSON.stringify(a))}return}let r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.open("GET",t,!0);let n=()=>{this.finish(t,r.status,r.responseText)};r.onload=n,r.onerror=n,r.send()}downloadJson(t,e,s){this.downloadText(t,t=>{e(JSON.parse(t))},s)}downloadBinary(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{let i=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(i))}catch(a){this.finish(t,400,JSON.stringify(a))}return}let r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer";let n=()=>{this.finish(t,r.status,r.response)};r.onload=()=>{200==r.status||0==r.status?this.finish(t,200,new Uint8Array(r.response)):n()},r.onerror=n,r.send()}start(t,e,s){let i=this.callbacks[t];try{if(i)return!0;this.callbacks[t]=i=[]}finally{i.push(e,s)}}finish(t,e,s){let i=this.callbacks[t];delete this.callbacks[t];let a=200==e||0==e?[s]:[e,s];for(let r=a.length-1,n=i.length;r<n;r+=2)i[r].apply(null,a)}},t2=class{constructor(t,e){if(this.data=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw Error("data cannot be null.");this.time=t,this.data=e}},tE=class{constructor(t){this.name=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}},tN=class{constructor(t,e){if(this.data=null,this.bones=null,this.target=null,this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=[];for(let s=0;s<t.bones.length;s++)this.bones.push(e.findBone(t.bones[s].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,s,i,a,n,l){let o=t.parent,h=o.a,c=o.b,d=o.c,u=o.d,m=-t.ashearX-t.arotation,$=0,f=0;switch(t.data.transformMode){case r.OnlyTranslation:$=e-t.worldX,f=s-t.worldY;break;case r.NoRotationOrReflection:let g=Math.abs(h*u-c*d)/(h*h+d*d),p=h/t.skeleton.scaleX,_=d/t.skeleton.scaleY;c=-_*g*t.skeleton.scaleX,u=p*g*t.skeleton.scaleY,m+=Math.atan2(_,p)*b.radDeg;default:let x=e-o.worldX,w=s-o.worldY,y=h*u-c*d;$=(x*u-w*c)/y-t.ax,f=(w*h-x*d)/y-t.ay}m+=Math.atan2(f,$)*b.radDeg,t.ascaleX<0&&(m+=180),m>180?m-=360:m<-180&&(m+=360);let k=t.ascaleX,S=t.ascaleY;if(i||a){switch(t.data.transformMode){case r.NoScale:case r.NoScaleOrReflection:$=e-t.worldX,f=s-t.worldY}let I=t.data.length*k,Y=Math.sqrt($*$+f*f);if(i&&Y<I||a&&Y>I&&I>1e-4){let v=(Y/I-1)*l+1;k*=v,n&&(S*=v)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+m*l,k,S,t.ashearX,t.ashearY)}apply2(t,e,s,i,a,r,n,l,o){let h=t.ax,c=t.ay,d=t.ascaleX,u=t.ascaleY,m=d,$=u,f=e.ascaleX,g=0,p=0,_=0;d<0?(d=-d,g=180,_=-1):(g=0,_=1),u<0&&(u=-u,_=-_),f<0?(f=-f,p=180):p=0;let x=e.ax,w=0,y=0,k=0,S=t.a,I=t.b,Y=t.c,v=t.d,C=1e-4>=Math.abs(d-u);!C||r?(w=0,y=S*x+t.worldX,k=Y*x+t.worldY):(y=S*x+I*(w=e.ay)+t.worldX,k=Y*x+v*w+t.worldY);let A=t.parent;S=A.a,I=A.b,Y=A.c;let X=1/(S*(v=A.d)-I*Y),T=y-A.worldX,F=k-A.worldY,B=(T*v-F*I)*X-h,R=(F*S-T*Y)*X-c,P=Math.sqrt(B*B+R*R),V=e.data.length*f,D,M;if(P<1e-4){this.apply1(t,s,i,!1,r,!1,o),e.updateWorldTransformWith(x,w,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}let L=((T=s-A.worldX)*v-(F=i-A.worldY)*I)*X-h,E=(F*S-T*Y)*X-c,N=L*L+E*E;if(0!=l){l*=d*(f+1)*.5;let U=Math.sqrt(N),W=U-P-V*d+l;if(W>0){let O=Math.min(1,W/(2*l))-1;O=(W-l*(1-O*O))/U,L-=O*L,E-=O*E,N=L*L+E*E}}outer:if(C){let q=(N-P*P-(V*=d)*V)/(2*P*V);q<-1?(q=-1,M=Math.PI*a):q>1?(q=1,M=0,r&&(m*=S=(Math.sqrt(N)/(P+V)-1)*o+1,n&&($*=S))):M=Math.acos(q)*a,D=Math.atan2(E*(S=P+V*q)-L*(I=V*Math.sin(M)),L*S+E*I)}else{let z=(S=d*V)*S,j=(I=u*V)*I,H=Math.atan2(E,L);Y=j*P*P+z*N-z*j;let G=-2*j*P,J=j-z;if((v=G*G-4*J*Y)>=0){let Q=Math.sqrt(v);G<0&&(Q=-Q);let Z=(Q=-(.5*(G+Q)))/J,K=Y/Q,tt=Math.abs(Z)<Math.abs(K)?Z:K;if(tt*tt<=N){D=H-Math.atan2(F=Math.sqrt(N-tt*tt)*a,tt),M=Math.atan2(F/u,(tt-P)/d);break outer}}let te=b.PI,ts=P-S,ti=ts*ts,ta=0,tr=0,tn=P+S,tl=tn*tn,to=0;(Y=-S*P/(z-j))>=-1&&Y<=1&&((v=(T=S*Math.cos(Y=Math.acos(Y))+P)*T+(F=I*Math.sin(Y))*F)<ti&&(te=Y,ti=v,ts=T,ta=F),v>tl&&(tr=Y,tl=v,tn=T,to=F)),N<=(ti+tl)*.5?(D=H-Math.atan2(ta*a,ts),M=te*a):(D=H-Math.atan2(to*a,tn),M=tr*a)}let th=Math.atan2(w,x)*_,tc=t.arotation;(D=(D-th)*b.radDeg+g-tc)>180?D-=360:D<-180&&(D+=360),t.updateWorldTransformWith(h,c,tc+D*o,m,$,0,0),tc=e.arotation,(M=((M+th)*b.radDeg-e.ashearX)*_+p-tc)>180?M-=360:M<-180&&(M+=360),e.updateWorldTransformWith(x,w,tc+M*o,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},tU=class extends t6{constructor(t){super(t,0,!1),this.bones=[],this.target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}},tW=class extends t6{constructor(t){super(t,0,!1),this.bones=[],this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}};!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(n||(n={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(l||(l={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(o||(o={}));var tO=class{constructor(t,e){if(this.data=null,this.bones=null,this.target=null,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=[],this.positions=[],this.world=[],this.curves=[],this.lengths=[],this.segments=[],this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.bones=[];for(let s=0,i=t.bones.length;s<i;s++)this.bones.push(e.findBone(t.bones[s].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof tB))return;let e=this.mixRotate,s=this.mixX,i=this.mixY;if(0==e&&0==s&&0==i)return;let a=this.data,r=a.rotateMode==o.Tangent,n=a.rotateMode==o.ChainScale,h=this.bones,c=h.length,d=r?c:c+1,u=I.setArraySize(this.spaces,d),m=n?this.lengths=I.setArraySize(this.lengths,c):null,$=this.spacing;switch(a.spacingMode){case l.Percent:if(n)for(let f=0,g=d-1;f<g;f++){let p=h[f],_=p.data.length;if(_<tO.epsilon)m[f]=0;else{let x=_*p.a,w=_*p.c;m[f]=Math.sqrt(x*x+w*w)}}I.arrayFill(u,1,d,$);break;case l.Proportional:let y=0;for(let k=0,S=d-1;k<S;){let Y=h[k],v=Y.data.length;if(v<tO.epsilon)n&&(m[k]=0),u[++k]=$;else{let C=v*Y.a,A=v*Y.c,X=Math.sqrt(C*C+A*A);n&&(m[k]=X),u[++k]=X,y+=X}}if(y>0){y=d/y*$;for(let T=1;T<d;T++)u[T]*=y}break;default:let F=a.spacingMode==l.Length;for(let B=0,R=d-1;B<R;){let P=h[B],V=P.data.length;if(V<tO.epsilon)n&&(m[B]=0),u[++B]=$;else{let D=V*P.a,M=V*P.c,L=Math.sqrt(D*D+M*M);n&&(m[B]=L),u[++B]=(F?V+$:$)*L/V}}}let E=this.computeWorldPositions(t,d,r),N=E[0],U=E[1],W=a.offsetRotation,O=!1;if(0==W)O=a.rotateMode==o.Chain;else{O=!1;let q=this.target.bone;W*=q.a*q.d-q.b*q.c>0?b.degRad:-b.degRad}for(let z=0,j=3;z<c;z++,j+=3){let H=h[z];H.worldX+=(N-H.worldX)*s,H.worldY+=(U-H.worldY)*i;let G=E[j],J=E[j+1],Q=G-N,Z=J-U;if(n){let K=m[z];if(0!=K){let tt=(Math.sqrt(Q*Q+Z*Z)/K-1)*e+1;H.a*=tt,H.c*=tt}}if(N=G,U=J,e>0){let te=H.a,ts=H.b,ti=H.c,ta=H.d,tr=0,tn=0,tl=0;if(tr=r?E[j-1]:0==u[z+1]?E[j+2]:Math.atan2(Z,Q),tr-=Math.atan2(ti,te),O){tn=Math.cos(tr),tl=Math.sin(tr);let to=H.data.length;N+=(to*(tn*te-tl*ti)-Q)*e,U+=(to*(tl*te+tn*ti)-Z)*e}else tr+=W;tr>b.PI?tr-=b.PI2:tr<-b.PI&&(tr+=b.PI2),tr*=e,tn=Math.cos(tr),tl=Math.sin(tr),H.a=tn*te-tl*ti,H.b=tn*ts-tl*ta,H.c=tl*te+tn*ti,H.d=tl*ts+tn*ta}H.updateAppliedTransform()}}computeWorldPositions(t,e,s){let i=this.target,a=this.position,r=this.spaces,o=I.setArraySize(this.positions,3*e+2),h=null,c=t.closed,d=t.worldVerticesLength,u=d/6,m=tO.NONE;if(!t.constantSpeed){let $=t.lengths,f=$[u-=c?1:2];this.data.positionMode==n.Percent&&(a*=f);let g;switch(this.data.spacingMode){case l.Percent:g=f;break;case l.Proportional:g=f/e;break;default:g=1}h=I.setArraySize(this.world,8);for(let p=0,_=0,x=0;p<e;p++,_+=3){let b=r[p]*g,w=a+=b;if(c)(w%=f)<0&&(w+=f),x=0;else if(w<0){m!=tO.BEFORE&&(m=tO.BEFORE,t.computeWorldVertices(i,2,4,h,0,2)),this.addBeforePosition(w,h,0,o,_);continue}else if(w>f){m!=tO.AFTER&&(m=tO.AFTER,t.computeWorldVertices(i,d-6,4,h,0,2)),this.addAfterPosition(w-f,h,0,o,_);continue}for(;;x++){let y=$[x];if(!(w>y)){if(0==x)w/=y;else{let k=$[x-1];w=(w-k)/(y-k)}break}}x!=m&&(m=x,c&&x==u?(t.computeWorldVertices(i,d-4,4,h,0,2),t.computeWorldVertices(i,0,4,h,4,2)):t.computeWorldVertices(i,6*x+2,8,h,0,2)),this.addCurvePosition(w,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],o,_,s||p>0&&0==b)}return o}c?(d+=2,h=I.setArraySize(this.world,d),t.computeWorldVertices(i,2,d-4,h,0,2),t.computeWorldVertices(i,0,2,h,d-4,2),h[d-2]=h[0],h[d-1]=h[1]):(u--,d-=4,h=I.setArraySize(this.world,d),t.computeWorldVertices(i,2,d,h,0,2));let S=I.setArraySize(this.curves,u),Y=0,v=h[0],C=h[1],A=0,X=0,T=0,F=0,B=0,R=0,P=0,V=0,D=0,M=0,L=0,E=0,N=0,U=0;for(let W=0,O=2;W<u;W++,O+=6)A=h[O],X=h[O+1],T=h[O+2],F=h[O+3],B=h[O+4],R=h[O+5],P=(v-2*A+T)*.1875,V=(C-2*X+F)*.1875,D=((A-T)*3-v+B)*.09375,M=((X-F)*3-C+R)*.09375,L=2*P+D,E=2*V+M,Y+=Math.sqrt((N=(A-v)*.75+P+.16666667*D)*N+(U=(X-C)*.75+V+.16666667*M)*U),N+=L,U+=E,L+=D,E+=M,Y+=Math.sqrt(N*N+U*U),N+=L,U+=E,Y+=Math.sqrt(N*N+U*U),N+=L+D,U+=E+M,Y+=Math.sqrt(N*N+U*U),S[W]=Y,v=B,C=R;this.data.positionMode==n.Percent&&(a*=Y);let q;switch(this.data.spacingMode){case l.Percent:q=Y;break;case l.Proportional:q=Y/e;break;default:q=1}let z=this.segments,j=0;for(let H=0,G=0,J=0,Q=0;H<e;H++,G+=3){let Z=r[H]*q,K=a+=Z;if(c)(K%=Y)<0&&(K+=Y),J=0;else if(K<0){this.addBeforePosition(K,h,0,o,G);continue}else if(K>Y){this.addAfterPosition(K-Y,h,d-4,o,G);continue}for(;;J++){let tt=S[J];if(!(K>tt)){if(0==J)K/=tt;else{let te=S[J-1];K=(K-te)/(tt-te)}break}}if(J!=m){m=J;let ts=6*J;for(v=h[ts],C=h[ts+1],A=h[ts+2],X=h[ts+3],T=h[ts+4],F=h[ts+5],B=h[ts+6],R=h[ts+7],P=(v-2*A+T)*.03,V=(C-2*X+F)*.03,D=((A-T)*3-v+B)*.006,M=((X-F)*3-C+R)*.006,L=2*P+D,E=2*V+M,j=Math.sqrt((N=(A-v)*.3+P+.16666667*D)*N+(U=(X-C)*.3+V+.16666667*M)*U),z[0]=j,ts=1;ts<8;ts++)N+=L,U+=E,L+=D,E+=M,j+=Math.sqrt(N*N+U*U),z[ts]=j;N+=L,U+=E,j+=Math.sqrt(N*N+U*U),z[8]=j,N+=L+D,U+=E+M,j+=Math.sqrt(N*N+U*U),z[9]=j,Q=0}for(K*=j;;Q++){let ti=z[Q];if(!(K>ti)){if(0==Q)K/=ti;else{let ta=z[Q-1];K=Q+(K-ta)/(ti-ta)}break}}this.addCurvePosition(.1*K,v,C,A,X,T,F,B,R,o,G,s||H>0&&0==Z)}return o}addBeforePosition(t,e,s,i,a){let r=e[s],n=e[s+1],l=e[s+2]-r,o=Math.atan2(e[s+3]-n,l);i[a]=r+t*Math.cos(o),i[a+1]=n+t*Math.sin(o),i[a+2]=o}addAfterPosition(t,e,s,i,a){let r=e[s+2],n=e[s+3],l=r-e[s],o=Math.atan2(n-e[s+1],l);i[a]=r+t*Math.cos(o),i[a+1]=n+t*Math.sin(o),i[a+2]=o}addCurvePosition(t,e,s,i,a,r,n,l,o,h,c,d){if(0==t||isNaN(t)){h[c]=e,h[c+1]=s,h[c+2]=Math.atan2(a-s,i-e);return}let u=t*t,m=u*t,$=1-t,f=$*$,g=f*$,p=$*t,_=3*p,x=$*_,b=_*t,w=e*g+i*x+r*b+l*m,y=s*g+a*x+n*b+o*m;h[c]=w,h[c+1]=y,d&&(t<.001?h[c+2]=Math.atan2(a-s,i-e):h[c+2]=Math.atan2(y-(s*f+a*p*2+n*u),w-(e*f+i*p*2+r*u)))}},t5=tO;t5.NONE=-1,t5.BEFORE=-2,t5.AFTER=-3,t5.epsilon=1e-5;var tq=class{constructor(t,e){if(this.data=null,this.bone=null,this.color=null,this.darkColor=null,this.attachment=null,this.attachmentTime=0,this.attachmentState=0,this.deform=[],!t)throw Error("data cannot be null.");if(!e)throw Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new _,this.darkColor=t.darkColor?new _:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof B&&this.attachment instanceof B&&t.deformAttachment==this.attachment.deformAttachment||(this.deform.length=0),this.attachment=t,this.attachmentTime=this.bone.skeleton.time)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},t7=class{constructor(t,e){if(this.data=null,this.bones=null,this.target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new C,this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=[];for(let s=0;s<t.bones.length;s++)this.bones.push(e.findBone(t.bones[s].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}update(){(0!=this.mixRotate||0!=this.mixX||0!=this.mixY||0!=this.mixScaleX||0!=this.mixScaleX||0!=this.mixShearY)&&(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,a=this.mixScaleY,r=this.mixShearY,n=0!=e||0!=s,l=this.target,o=l.a,h=l.b,c=l.c,d=l.d,u=o*d-h*c>0?b.degRad:-b.degRad,m=this.data.offsetRotation*u,$=this.data.offsetShearY*u,f=this.bones;for(let g=0,p=f.length;g<p;g++){let _=f[g];if(0!=t){let x=_.a,w=_.b,y=_.c,k=_.d,S=Math.atan2(c,o)-Math.atan2(y,x)+m;S>b.PI?S-=b.PI2:S<-b.PI&&(S+=b.PI2);let I=Math.cos(S*=t),Y=Math.sin(S);_.a=I*x-Y*y,_.b=I*w-Y*k,_.c=Y*x+I*y,_.d=Y*w+I*k}if(n){let v=this.temp;l.localToWorld(v.set(this.data.offsetX,this.data.offsetY)),_.worldX+=(v.x-_.worldX)*e,_.worldY+=(v.y-_.worldY)*s}if(0!=i){let C=Math.sqrt(_.a*_.a+_.c*_.c);0!=C&&(C=(C+(Math.sqrt(o*o+c*c)-C+this.data.offsetScaleX)*i)/C),_.a*=C,_.c*=C}if(0!=a){let A=Math.sqrt(_.b*_.b+_.d*_.d);0!=A&&(A=(A+(Math.sqrt(h*h+d*d)-A+this.data.offsetScaleY)*a)/A),_.b*=A,_.d*=A}if(r>0){let X=_.b,T=_.d,F=Math.atan2(T,X),B=Math.atan2(d,h)-Math.atan2(c,o)-(F-Math.atan2(_.c,_.a));B>b.PI?B-=b.PI2:B<-b.PI&&(B+=b.PI2),B=F+(B+$)*r;let R=Math.sqrt(X*X+T*T);_.b=Math.cos(B)*R,_.d=Math.sin(B)*R}_.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,a=this.mixScaleY,r=this.mixShearY,n=0!=e||0!=s,l=this.target,o=l.a,h=l.b,c=l.c,d=l.d,u=o*d-h*c>0?b.degRad:-b.degRad,m=this.data.offsetRotation*u,$=this.data.offsetShearY*u,f=this.bones;for(let g=0,p=f.length;g<p;g++){let _=f[g];if(0!=t){let x=_.a,w=_.b,y=_.c,k=_.d,S=Math.atan2(c,o)+m;S>b.PI?S-=b.PI2:S<-b.PI&&(S+=b.PI2);let I=Math.cos(S*=t),Y=Math.sin(S);_.a=I*x-Y*y,_.b=I*w-Y*k,_.c=Y*x+I*y,_.d=Y*w+I*k}if(n){let v=this.temp;l.localToWorld(v.set(this.data.offsetX,this.data.offsetY)),_.worldX+=v.x*e,_.worldY+=v.y*s}if(0!=i){let C=(Math.sqrt(o*o+c*c)-1+this.data.offsetScaleX)*i+1;_.a*=C,_.c*=C}if(0!=a){let A=(Math.sqrt(h*h+d*d)-1+this.data.offsetScaleY)*a+1;_.b*=A,_.d*=A}if(r>0){let X=Math.atan2(d,h)-Math.atan2(c,o);X>b.PI?X-=b.PI2:X<-b.PI&&(X+=b.PI2);let T=_.b,F=_.d;X=Math.atan2(F,T)+(X-b.PI/2+$)*r;let B=Math.sqrt(T*T+F*F);_.b=Math.cos(X)*B,_.d=Math.sin(X)*B}_.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,a=this.mixScaleY,r=this.mixShearY,n=this.target,l=this.bones;for(let o=0,h=l.length;o<h;o++){let c=l[o],d=c.arotation;if(0!=t){let u=n.arotation-d+this.data.offsetRotation;u-=(16384-(16384.499999999996-u/360|0))*360,d+=u*t}let m=c.ax,$=c.ay;m+=(n.ax-m+this.data.offsetX)*e,$+=(n.ay-$+this.data.offsetY)*s;let f=c.ascaleX,g=c.ascaleY;0!=i&&0!=f&&(f=(f+(n.ascaleX-f+this.data.offsetScaleX)*i)/f),0!=a&&0!=g&&(g=(g+(n.ascaleY-g+this.data.offsetScaleY)*a)/g);let p=c.ashearY;if(0!=r){let _=n.ashearY-p+this.data.offsetShearY;_-=(16384-(16384.499999999996-_/360|0))*360,p+=_*r}c.updateWorldTransformWith(m,$,d,f,g,c.ashearX,p)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,a=this.mixScaleY,r=this.mixShearY,n=this.target,l=this.bones;for(let o=0,h=l.length;o<h;o++){let c=l[o],d=c.arotation+(n.arotation+this.data.offsetRotation)*t,u=c.ax+(n.ax+this.data.offsetX)*e,m=c.ay+(n.ay+this.data.offsetY)*s,$=c.ascaleX*((n.ascaleX-1+this.data.offsetScaleX)*i+1),f=c.ascaleY*((n.ascaleY-1+this.data.offsetScaleY)*a+1),g=c.ashearY+(n.ashearY+this.data.offsetShearY)*r;c.updateWorldTransformWith(u,m,d,$,f,c.ashearX,g)}}},tz=class{constructor(t){if(this.data=null,this.bones=null,this.slots=null,this.drawOrder=null,this.ikConstraints=null,this.transformConstraints=null,this.pathConstraints=null,this._updateCache=[],this.skin=null,this.color=null,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw Error("data cannot be null.");this.data=t,this.bones=[];for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i;if(s.parent){let a=this.bones[s.parent.index];i=new tD(s,this,a),a.children.push(i)}else i=new tD(s,this,null);this.bones.push(i)}this.slots=[],this.drawOrder=[];for(let r=0;r<t.slots.length;r++){let n=t.slots[r],l=this.bones[n.boneData.index],o=new tq(n,l);this.slots.push(o),this.drawOrder.push(o)}this.ikConstraints=[];for(let h=0;h<t.ikConstraints.length;h++){let c=t.ikConstraints[h];this.ikConstraints.push(new tN(c,this))}this.transformConstraints=[];for(let d=0;d<t.transformConstraints.length;d++){let u=t.transformConstraints[d];this.transformConstraints.push(new t7(u,this))}this.pathConstraints=[];for(let m=0;m<t.pathConstraints.length;m++){let $=t.pathConstraints[m];this.pathConstraints.push(new t5($,this))}this.color=new _(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,s=t.length;e<s;e++){let i=t[e];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin){let a=this.skin.bones;for(let r=0,n=this.skin.bones.length;r<n;r++){let l=this.bones[a[r].index];do l.sorted=!1,l.active=!0,l=l.parent;while(l)}}let o=this.ikConstraints,h=this.transformConstraints,c=this.pathConstraints,d=o.length,u=h.length,m=c.length,$=d+u+m;outer:for(let f=0;f<$;f++){for(let g=0;g<d;g++){let p=o[g];if(p.data.order==f){this.sortIkConstraint(p);continue outer}}for(let _=0;_<u;_++){let x=h[_];if(x.data.order==f){this.sortTransformConstraint(x);continue outer}}for(let b=0;b<m;b++){let w=c[b];if(w.data.order==f){this.sortPathConstraint(w);continue outer}}}for(let y=0,k=t.length;y<k;y++)this.sortBone(t[y])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&I.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let s=t.bones,i=s[0];if(this.sortBone(i),1==s.length)this._updateCache.push(t),this.sortReset(i.children);else{let a=s[s.length-1];this.sortBone(a),this._updateCache.push(t),this.sortReset(i.children),a.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&I.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,s=e.data.index,i=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,s,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,i);for(let a=0,r=this.data.skins.length;a<r;a++)this.sortPathConstraintAttachment(this.data.skins[a],s,i);let n=e.getAttachment();n instanceof tB&&this.sortPathConstraintAttachmentWith(n,i);let l=t.bones,o=l.length;for(let h=0;h<o;h++)this.sortBone(l[h]);this._updateCache.push(t);for(let c=0;c<o;c++)this.sortReset(l[c].children);for(let d=0;d<o;d++)l[d].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&I.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,s=e.length;if(t.data.local)for(let i=0;i<s;i++){let a=e[i];this.sortBone(a.parent),this.sortBone(a)}else for(let r=0;r<s;r++)this.sortBone(e[r]);this._updateCache.push(t);for(let n=0;n<s;n++)this.sortReset(e[n].children);for(let l=0;l<s;l++)e[l].sorted=!0}sortPathConstraintAttachment(t,e,s){let i=t.attachments[e];if(i)for(let a in i)this.sortPathConstraintAttachmentWith(i[a],s)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof tB))return;let s=t.bones;if(s){let i=this.bones;for(let a=0,r=s.length;a<r;){let n=s[a++];for(n+=a;a<n;)this.sortBone(i[s[a++]])}}else this.sortBone(e)}sortBone(t){if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,s=t.length;e<s;e++){let i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,s=t.length;e<s;e++){let i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}let a=this._updateCache;for(let r=0,n=a.length;r<n;r++)a[r].update()}updateWorldTransformWith(t){let e=this.getRootBone(),s=t.a,i=t.b,a=t.c,r=t.d;e.worldX=s*this.x+i*this.y+t.worldX,e.worldY=a*this.x+r*this.y+t.worldY;let n=e.rotation+90+e.shearY,l=b.cosDeg(e.rotation+e.shearX)*e.scaleX,o=b.cosDeg(n)*e.scaleY,h=b.sinDeg(e.rotation+e.shearX)*e.scaleX,c=b.sinDeg(n)*e.scaleY;e.a=(s*l+i*h)*this.scaleX,e.b=(s*o+i*c)*this.scaleX,e.c=(a*l+r*h)*this.scaleY,e.d=(a*o+r*c)*this.scaleY;let d=this._updateCache;for(let u=0,m=d.length;u<m;u++){let $=d[u];$!=e&&$.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose();let i=this.ikConstraints;for(let a=0,r=i.length;a<r;a++){let n=i[a];n.mix=n.data.mix,n.softness=n.data.softness,n.bendDirection=n.data.bendDirection,n.compress=n.data.compress,n.stretch=n.data.stretch}let l=this.transformConstraints;for(let o=0,h=l.length;o<h;o++){let c=l[o],d=c.data;c.mixRotate=d.mixRotate,c.mixX=d.mixX,c.mixY=d.mixY,c.mixScaleX=d.mixScaleX,c.mixScaleY=d.mixScaleY,c.mixShearY=d.mixShearY}let u=this.pathConstraints;for(let m=0,$=u.length;m<$;m++){let f=u[m],g=f.data;f.position=g.position,f.spacing=g.spacing,f.mixRotate=g.mixRotate,f.mixX=g.mixX,f.mixY=g.mixY}}setSlotsToSetupPose(){let t=this.slots;I.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.data.name==t)return a}return null}findSlot(t){if(!t)throw Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.data.name==t)return a}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t){if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let s=0,i=e.length;s<i;s++){let a=e[s],r=a.data.attachmentName;if(r){let n=t.getAttachment(s,r);n&&a.setAttachment(n)}}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlot(t).index,e)}getAttachment(t,e){if(!e)throw Error("attachmentName cannot be null.");if(this.skin){let s=this.skin.getAttachment(t,e);if(s)return s}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw Error("slotName cannot be null.");let s=this.slots;for(let i=0,a=s.length;i<a;i++){let r=s[i];if(r.data.name==t){let n=null;if(e&&!(n=this.getAttachment(i,e)))throw Error("Attachment not found: "+e+", for slot: "+t);r.setAttachment(n);return}}throw Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.data.name==t)return a}return null}findTransformConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.data.name==t)return a}return null}findPathConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.data.name==t)return a}return null}getBoundsRect(){let t=new C,e=new C;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,s=[,,]){if(!t)throw Error("offset cannot be null.");if(!e)throw Error("size cannot be null.");let i=this.drawOrder,a=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let o=0,h=i.length;o<h;o++){let c=i[o];if(!c.bone.active)continue;let d=0,u=null,m=c.getAttachment();if(m instanceof t3)d=8,u=I.setArraySize(s,d,0),m.computeWorldVertices(c.bone,u,0,2);else if(m instanceof t1){let $=m;d=$.worldVerticesLength,u=I.setArraySize(s,d,0),$.computeWorldVertices(c,0,d,u,0,2)}if(u)for(let f=0,g=u.length;f<g;f+=2){let p=u[f],_=u[f+1];a=Math.min(a,p),r=Math.min(r,_),n=Math.max(n,p),l=Math.max(l,_)}}t.set(a,r),e.set(n-a,l-r)}update(t){this.time+=t}},t8=class{constructor(){this.name=null,this.bones=[],this.slots=[],this.skins=[],this.defaultSkin=null,this.events=[],this.animations=[],this.ikConstraints=[],this.transformConstraints=[],this.pathConstraints=[],this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.name==t)return a}return null}findSlot(t){if(!t)throw Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.name==t)return a}return null}findSkin(t){if(!t)throw Error("skinName cannot be null.");let e=this.skins;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.name==t)return a}return null}findEvent(t){if(!t)throw Error("eventDataName cannot be null.");let e=this.events;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.name==t)return a}return null}findAnimation(t){if(!t)throw Error("animationName cannot be null.");let e=this.animations;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.name==t)return a}return null}findIkConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.name==t)return a}return null}findTransformConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.name==t)return a}return null}findPathConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let a=e[s];if(a.name==t)return a}return null}},tj=class{constructor(t=0,e=null,s=null){this.slotIndex=t,this.name=e,this.attachment=s}},tH=class{constructor(t){if(this.name=null,this.attachments=[],this.bones=[],this.constraints=[],!t)throw Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(!s)throw Error("attachment cannot be null.");let i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=s}addSkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let a=0;a<this.bones.length;a++)if(this.bones[a]==s){i=!0;break}i||this.bones.push(s)}for(let r=0;r<t.constraints.length;r++){let n=t.constraints[r],l=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){l=!0;break}l||this.constraints.push(n)}let h=t.getAttachments();for(let c=0;c<h.length;c++){var d=h[c];this.setAttachment(d.slotIndex,d.name,d.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let a=0;a<this.bones.length;a++)if(this.bones[a]==s){i=!0;break}i||this.bones.push(s)}for(let r=0;r<t.constraints.length;r++){let n=t.constraints[r],l=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){l=!0;break}l||this.constraints.push(n)}let h=t.getAttachments();for(let c=0;c<h.length;c++){var d=h[c];d.attachment&&(d.attachment instanceof t1?(d.attachment=d.attachment.newLinkedMesh(),this.setAttachment(d.slotIndex,d.name,d.attachment)):(d.attachment=d.attachment.copy(),this.setAttachment(d.slotIndex,d.name,d.attachment)))}}getAttachment(t,e){let s=this.attachments[t];return s?s[e]:null}removeAttachment(t,e){let s=this.attachments[t];s&&(s[e]=null)}getAttachments(){let t=[];for(var e=0;e<this.attachments.length;e++){let s=this.attachments[e];if(s)for(let i in s){let a=s[i];a&&t.push(new tj(e,i,a))}}return t}getAttachmentsForSlot(t,e){let s=this.attachments[t];if(s)for(let i in s){let a=s[i];a&&e.push(new tj(t,i,a))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let s=0;for(let i=0;i<t.slots.length;i++){let a=t.slots[i],r=a.getAttachment();if(r&&s<e.attachments.length){let n=e.attachments[s];for(let l in n)if(r==n[l]){let o=this.getAttachment(s,l);o&&a.setAttachment(o);break}}s++}}},tG=class{constructor(t,e,s){if(this.index=0,this.name=null,this.boneData=null,this.color=new _(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=null,t<0)throw Error("index must be >= 0.");if(!e)throw Error("name cannot be null.");if(!s)throw Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}};!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(h||(h={}));var t9=class extends t6{constructor(t){super(t,0,!1),this.bones=[],this.target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}},tJ=class{constructor(t){this.scale=1,this.attachmentLoader=null,this.linkedMeshes=[],this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,s=new t8;s.name="";let i=new tQ(t),a=i.readInt32(),r=i.readInt32();s.hash=0==r&&0==a?null:r.toString(16)+a.toString(16),s.version=i.readString(),s.x=i.readFloat(),s.y=i.readFloat(),s.width=i.readFloat(),s.height=i.readFloat();let o=i.readBoolean();o&&(s.fps=i.readFloat(),s.imagesPath=i.readString(),s.audioPath=i.readString());let h=0;h=i.readInt(!0);for(let c=0;c<h;c++)i.strings.push(i.readString());h=i.readInt(!0);for(let d=0;d<h;d++){let u=i.readString(),m=0==d?null:s.bones[i.readInt(!0)],$=new t4(d,u,m);$.rotation=i.readFloat(),$.x=i.readFloat()*e,$.y=i.readFloat()*e,$.scaleX=i.readFloat(),$.scaleY=i.readFloat(),$.shearX=i.readFloat(),$.shearY=i.readFloat(),$.length=i.readFloat()*e,$.transformMode=i.readInt(!0),$.skinRequired=i.readBoolean(),o&&_.rgba8888ToColor($.color,i.readInt32()),s.bones.push($)}h=i.readInt(!0);for(let f=0;f<h;f++){let g=i.readString(),p=s.bones[i.readInt(!0)],x=new tG(f,g,p);_.rgba8888ToColor(x.color,i.readInt32());let b=i.readInt32();-1!=b&&_.rgb888ToColor(x.darkColor=new _,b),x.attachmentName=i.readStringRef(),x.blendMode=i.readInt(!0),s.slots.push(x)}h=i.readInt(!0);for(let w=0,y;w<h;w++){let k=new tU(i.readString());k.order=i.readInt(!0),k.skinRequired=i.readBoolean(),y=i.readInt(!0);for(let S=0;S<y;S++)k.bones.push(s.bones[i.readInt(!0)]);k.target=s.bones[i.readInt(!0)],k.mix=i.readFloat(),k.softness=i.readFloat()*e,k.bendDirection=i.readByte(),k.compress=i.readBoolean(),k.stretch=i.readBoolean(),k.uniform=i.readBoolean(),s.ikConstraints.push(k)}h=i.readInt(!0);for(let Y=0,v;Y<h;Y++){let C=new t9(i.readString());C.order=i.readInt(!0),C.skinRequired=i.readBoolean(),v=i.readInt(!0);for(let A=0;A<v;A++)C.bones.push(s.bones[i.readInt(!0)]);C.target=s.bones[i.readInt(!0)],C.local=i.readBoolean(),C.relative=i.readBoolean(),C.offsetRotation=i.readFloat(),C.offsetX=i.readFloat()*e,C.offsetY=i.readFloat()*e,C.offsetScaleX=i.readFloat(),C.offsetScaleY=i.readFloat(),C.offsetShearY=i.readFloat(),C.mixRotate=i.readFloat(),C.mixX=i.readFloat(),C.mixY=i.readFloat(),C.mixScaleX=i.readFloat(),C.mixScaleY=i.readFloat(),C.mixShearY=i.readFloat(),s.transformConstraints.push(C)}h=i.readInt(!0);for(let X=0,T;X<h;X++){let F=new tW(i.readString());F.order=i.readInt(!0),F.skinRequired=i.readBoolean(),T=i.readInt(!0);for(let B=0;B<T;B++)F.bones.push(s.bones[i.readInt(!0)]);F.target=s.slots[i.readInt(!0)],F.positionMode=i.readInt(!0),F.spacingMode=i.readInt(!0),F.rotateMode=i.readInt(!0),F.offsetRotation=i.readFloat(),F.position=i.readFloat(),F.positionMode==n.Fixed&&(F.position*=e),F.spacing=i.readFloat(),(F.spacingMode==l.Length||F.spacingMode==l.Fixed)&&(F.spacing*=e),F.mixRotate=i.readFloat(),F.mixX=i.readFloat(),F.mixY=i.readFloat(),s.pathConstraints.push(F)}let R=this.readSkin(i,s,!0,o);R&&(s.defaultSkin=R,s.skins.push(R));{let P=s.skins.length;for(I.setArraySize(s.skins,h=P+i.readInt(!0));P<h;P++)s.skins[P]=this.readSkin(i,s,!1,o)}h=this.linkedMeshes.length;for(let V=0;V<h;V++){let D=this.linkedMeshes[V],M=(D.skin?s.findSkin(D.skin):s.defaultSkin).getAttachment(D.slotIndex,D.parent);D.mesh.deformAttachment=D.inheritDeform?M:D.mesh,D.mesh.setParentMesh(M),D.mesh.updateUVs()}this.linkedMeshes.length=0,h=i.readInt(!0);for(let L=0;L<h;L++){let E=new tE(i.readStringRef());E.intValue=i.readInt(!1),E.floatValue=i.readFloat(),E.stringValue=i.readString(),E.audioPath=i.readString(),E.audioPath&&(E.volume=i.readFloat(),E.balance=i.readFloat()),s.events.push(E)}h=i.readInt(!0);for(let N=0;N<h;N++)s.animations.push(this.readAnimation(i,i.readString(),s));return s}readSkin(t,e,s,i){let a=null,r=0;if(s){if(0==(r=t.readInt(!0)))return null;a=new tH("default")}else{(a=new tH(t.readStringRef())).bones.length=t.readInt(!0);for(let n=0,l=a.bones.length;n<l;n++)a.bones[n]=e.bones[t.readInt(!0)];for(let o=0,h=t.readInt(!0);o<h;o++)a.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let c=0,d=t.readInt(!0);c<d;c++)a.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let u=0,m=t.readInt(!0);u<m;u++)a.constraints.push(e.pathConstraints[t.readInt(!0)]);r=t.readInt(!0)}for(let $=0;$<r;$++){let f=t.readInt(!0);for(let g=0,p=t.readInt(!0);g<p;g++){let _=t.readStringRef(),x=this.readAttachment(t,e,a,f,_,i);x&&a.setAttachment(f,_,x)}}return a}readAttachment(t,e,s,i,a,r){let n=this.scale,l=t.readStringRef();switch(l||(l=a),t.readByte()){case c.Region:{let o=t.readStringRef(),h=t.readFloat(),d=t.readFloat(),u=t.readFloat(),m=t.readFloat(),$=t.readFloat(),f=t.readFloat(),g=t.readFloat(),p=t.readInt32();o||(o=l);let x=this.attachmentLoader.newRegionAttachment(s,l,o);if(!x)return null;return x.path=o,x.x=d*n,x.y=u*n,x.scaleX=m,x.scaleY=$,x.rotation=h,x.width=f*n,x.height=g*n,_.rgba8888ToColor(x.color,p),x.updateOffset(),x}case c.BoundingBox:{let b=t.readInt(!0),w=this.readVertices(t,b),y=r?t.readInt32():0,k=this.attachmentLoader.newBoundingBoxAttachment(s,l);if(!k)return null;return k.worldVerticesLength=b<<1,k.vertices=w.vertices,k.bones=w.bones,r&&_.rgba8888ToColor(k.color,y),k}case c.Mesh:{let S=t.readStringRef(),Y=t.readInt32(),v=t.readInt(!0),C=this.readFloatArray(t,v<<1,1),A=this.readShortArray(t),X=this.readVertices(t,v),T=t.readInt(!0),F=null,B=0,R=0;r&&(F=this.readShortArray(t),B=t.readFloat(),R=t.readFloat()),S||(S=l);let P=this.attachmentLoader.newMeshAttachment(s,l,S);if(!P)return null;return P.path=S,_.rgba8888ToColor(P.color,Y),P.bones=X.bones,P.vertices=X.vertices,P.worldVerticesLength=v<<1,P.triangles=A,P.regionUVs=C,P.updateUVs(),P.hullLength=T<<1,r&&(P.edges=F,P.width=B*n,P.height=R*n),P}case c.LinkedMesh:{let V=t.readStringRef(),D=t.readInt32(),M=t.readStringRef(),L=t.readStringRef(),E=t.readBoolean(),N=0,U=0;r&&(N=t.readFloat(),U=t.readFloat()),V||(V=l);let W=this.attachmentLoader.newMeshAttachment(s,l,V);if(!W)return null;return W.path=V,_.rgba8888ToColor(W.color,D),r&&(W.width=N*n,W.height=U*n),this.linkedMeshes.push(new tZ(W,M,i,L,E)),W}case c.Path:{let O=t.readBoolean(),q=t.readBoolean(),z=t.readInt(!0),j=this.readVertices(t,z),H=I.newArray(z/3,0);for(let G=0,J=H.length;G<J;G++)H[G]=t.readFloat()*n;let Q=r?t.readInt32():0,Z=this.attachmentLoader.newPathAttachment(s,l);if(!Z)return null;return Z.closed=O,Z.constantSpeed=q,Z.worldVerticesLength=z<<1,Z.vertices=j.vertices,Z.bones=j.bones,Z.lengths=H,r&&_.rgba8888ToColor(Z.color,Q),Z}case c.Point:{let K=t.readFloat(),tt=t.readFloat(),te=t.readFloat(),ts=r?t.readInt32():0,ti=this.attachmentLoader.newPointAttachment(s,l);if(!ti)return null;return ti.x=tt*n,ti.y=te*n,ti.rotation=K,r&&_.rgba8888ToColor(ti.color,ts),ti}case c.Clipping:{let ta=t.readInt(!0),tr=t.readInt(!0),tn=this.readVertices(t,tr),tl=r?t.readInt32():0,to=this.attachmentLoader.newClippingAttachment(s,l);if(!to)return null;return to.endSlot=e.slots[ta],to.worldVerticesLength=tr<<1,to.vertices=tn.vertices,to.bones=tn.bones,r&&_.rgba8888ToColor(to.color,tl),to}}return null}readVertices(t,e){let s=this.scale,i=new tK;if(!t.readBoolean())return i.vertices=this.readFloatArray(t,e<<1,s),i;let a=[],r=[];for(let n=0;n<e;n++){let l=t.readInt(!0);r.push(l);for(let o=0;o<l;o++)r.push(t.readInt(!0)),a.push(t.readFloat()*s),a.push(t.readFloat()*s),a.push(t.readFloat())}return i.vertices=I.toFloatArray(a),i.bones=r,i}readFloatArray(t,e,s){let i=Array(e);if(1==s)for(let a=0;a<e;a++)i[a]=t.readFloat();else for(let r=0;r<e;r++)i[r]=t.readFloat()*s;return i}readShortArray(t){let e=t.readInt(!0),s=Array(e);for(let i=0;i<e;i++)s[i]=t.readShort();return s}readAnimation(t,e,s){t.readInt(!0);let i=[],a=this.scale;new _,new _;for(let r=0,o=t.readInt(!0);r<o;r++){let h=t.readInt(!0);for(let c=0,d=t.readInt(!0);c<d;c++){let u=t.readByte(),m=t.readInt(!0),$=m-1;switch(u){case em:{let f=new te(m,h);for(let g=0;g<m;g++)f.setFrame(g,t.readFloat(),t.readStringRef());i.push(f);break}case e$:{let p=t.readInt(!0),x=new J(m,p,h),b=t.readFloat(),w=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255;for(let Y=0,v=0;x.setFrame(Y,b,w,y,k,S),Y!=$;Y++){let C=t.readFloat(),A=t.readUnsignedByte()/255,X=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255;switch(t.readByte()){case e0:x.setStepped(Y);break;case ey:es(t,x,v++,Y,0,b,C,w,A,1),es(t,x,v++,Y,1,b,C,y,X,1),es(t,x,v++,Y,2,b,C,k,T,1),es(t,x,v++,Y,3,b,C,S,F,1)}b=C,w=A,y=X,k=T,S=F}i.push(x);break}case ef:{let B=t.readInt(!0),P=new Q(m,B,h),V=t.readFloat(),D=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255;for(let ti=0,tr=0;P.setFrame(ti,V,D,M,L),ti!=$;ti++){let tu=t.readFloat(),tm=t.readUnsignedByte()/255,t$=t.readUnsignedByte()/255,tf=t.readUnsignedByte()/255;switch(t.readByte()){case e0:P.setStepped(ti);break;case ey:es(t,P,tr++,ti,0,V,tu,D,tm,1),es(t,P,tr++,ti,1,V,tu,M,t$,1),es(t,P,tr++,ti,2,V,tu,L,tf,1)}V=tu,D=tm,M=t$,L=tf}i.push(P);break}case eg:{let tg=t.readInt(!0),tp=new K(m,tg,h),t_=t.readFloat(),tx=t.readUnsignedByte()/255,tb=t.readUnsignedByte()/255,tw=t.readUnsignedByte()/255,t0=t.readUnsignedByte()/255,ty=t.readUnsignedByte()/255,tk=t.readUnsignedByte()/255,tS=t.readUnsignedByte()/255;for(let tI=0,tY=0;tp.setFrame(tI,t_,tx,tb,tw,t0,ty,tk,tS),tI!=$;tI++){let tv=t.readFloat(),tC=t.readUnsignedByte()/255,tA=t.readUnsignedByte()/255,tX=t.readUnsignedByte()/255,tT=t.readUnsignedByte()/255,tF=t.readUnsignedByte()/255,t1=t.readUnsignedByte()/255,tB=t.readUnsignedByte()/255;switch(t.readByte()){case e0:tp.setStepped(tI);break;case ey:es(t,tp,tY++,tI,0,t_,tv,tx,tC,1),es(t,tp,tY++,tI,1,t_,tv,tb,tA,1),es(t,tp,tY++,tI,2,t_,tv,tw,tX,1),es(t,tp,tY++,tI,3,t_,tv,t0,tT,1),es(t,tp,tY++,tI,4,t_,tv,ty,tF,1),es(t,tp,tY++,tI,5,t_,tv,tk,t1,1),es(t,tp,tY++,tI,6,t_,tv,tS,tB,1)}t_=tv,tx=tC,tb=tA,tw=tX,t0=tT,ty=tF,tk=t1,tS=tB}i.push(tp);break}case ep:{let tR=t.readInt(!0),tP=new tt(m,tR,h),t3=t.readFloat(),tV=t.readUnsignedByte()/255,t4=t.readUnsignedByte()/255,tD=t.readUnsignedByte()/255,t6=t.readUnsignedByte()/255,tM=t.readUnsignedByte()/255,tL=t.readUnsignedByte()/255;for(let tE=0,tN=0;tP.setFrame(tE,t3,tV,t4,tD,t6,tM,tL),tE!=$;tE++){let tU=t.readFloat(),tW=t.readUnsignedByte()/255,tO=t.readUnsignedByte()/255,t5=t.readUnsignedByte()/255,tq=t.readUnsignedByte()/255,t7=t.readUnsignedByte()/255,tz=t.readUnsignedByte()/255;switch(t.readByte()){case e0:tP.setStepped(tE);break;case ey:es(t,tP,tN++,tE,0,t3,tU,tV,tW,1),es(t,tP,tN++,tE,1,t3,tU,t4,tO,1),es(t,tP,tN++,tE,2,t3,tU,tD,t5,1),es(t,tP,tN++,tE,3,t3,tU,t6,tq,1),es(t,tP,tN++,tE,4,t3,tU,tM,t7,1),es(t,tP,tN++,tE,5,t3,tU,tL,tz,1)}t3=tU,tV=tW,t4=tO,tD=t5,t6=tq,tM=t7,tL=tz}i.push(tP);break}case e_:{let t8=new Z(m,t.readInt(!0),h),tj=t.readFloat(),tH=t.readUnsignedByte()/255;for(let tG=0,t9=0;t8.setFrame(tG,tj,tH),tG!=$;tG++){let tJ=t.readFloat(),tQ=t.readUnsignedByte()/255;switch(t.readByte()){case e0:t8.setStepped(tG);break;case ey:es(t,t8,t9++,tG,0,tj,tJ,tH,tQ,1)}tj=tJ,tH=tQ}i.push(t8)}}}}for(let tZ=0,tK=t.readInt(!0);tZ<tK;tZ++){let ek=t.readInt(!0);for(let eS=0,eI=t.readInt(!0);eS<eI;eS++){let eY=t.readByte(),ev=t.readInt(!0),eC=t.readInt(!0);switch(eY){case ei:i.push(et(t,new E(ev,eC,ek),1));break;case ea:i.push(ee(t,new N(ev,eC,ek),a));break;case er:i.push(et(t,new U(ev,eC,ek),a));break;case en:i.push(et(t,new W(ev,eC,ek),a));break;case el:i.push(ee(t,new O(ev,eC,ek),1));break;case eo:i.push(et(t,new q(ev,eC,ek),1));break;case eh:i.push(et(t,new z(ev,eC,ek),1));break;case ec:i.push(ee(t,new j(ev,eC,ek),1));break;case ed:i.push(et(t,new H(ev,eC,ek),1));break;case eu:i.push(et(t,new G(ev,eC,ek),1))}}}for(let eA=0,eX=t.readInt(!0);eA<eX;eA++){let eT=t.readInt(!0),eF=t.readInt(!0),e1=eF-1,eB=new tl(eF,t.readInt(!0),eT),eR=t.readFloat(),eP=t.readFloat(),e3=t.readFloat()*a;for(let eV=0,e4=0;eB.setFrame(eV,eR,eP,e3,t.readByte(),t.readBoolean(),t.readBoolean()),eV!=e1;eV++){let eD=t.readFloat(),e6=t.readFloat(),eM=t.readFloat()*a;switch(t.readByte()){case e0:eB.setStepped(eV);break;case ey:es(t,eB,e4++,eV,0,eR,eD,eP,e6,1),es(t,eB,e4++,eV,1,eR,eD,e3,eM,a)}eR=eD,eP=e6,e3=eM}i.push(eB)}for(let eL=0,e2=t.readInt(!0);eL<e2;eL++){let eE=t.readInt(!0),eN=t.readInt(!0),eU=eN-1,eW=new to(eN,t.readInt(!0),eE),eO=t.readFloat(),e5=t.readFloat(),eq=t.readFloat(),e7=t.readFloat(),ez=t.readFloat(),e8=t.readFloat(),ej=t.readFloat();for(let eH=0,eG=0;eW.setFrame(eH,eO,e5,eq,e7,ez,e8,ej),eH!=eU;eH++){let e9=t.readFloat(),eJ=t.readFloat(),eQ=t.readFloat(),eZ=t.readFloat(),eK=t.readFloat(),st=t.readFloat(),se=t.readFloat();switch(t.readByte()){case e0:eW.setStepped(eH);break;case ey:es(t,eW,eG++,eH,0,eO,e9,e5,eJ,1),es(t,eW,eG++,eH,1,eO,e9,eq,eQ,1),es(t,eW,eG++,eH,2,eO,e9,e7,eZ,1),es(t,eW,eG++,eH,3,eO,e9,ez,eK,1),es(t,eW,eG++,eH,4,eO,e9,e8,st,1),es(t,eW,eG++,eH,5,eO,e9,ej,se,1)}eO=e9,e5=eJ,eq=eQ,e7=eZ,ez=eK,e8=st,ej=se}i.push(eW)}for(let ss=0,si=t.readInt(!0);ss<si;ss++){let sa=t.readInt(!0),sr=s.pathConstraints[sa];for(let sn=0,sl=t.readInt(!0);sn<sl;sn++)switch(t.readByte()){case ex:i.push(et(t,new th(t.readInt(!0),t.readInt(!0),sa),sr.positionMode==n.Fixed?a:1));break;case eb:i.push(et(t,new tc(t.readInt(!0),t.readInt(!0),sa),sr.spacingMode==l.Length||sr.spacingMode==l.Fixed?a:1));break;case ew:let so=new td(t.readInt(!0),t.readInt(!0),sa),sh=t.readFloat(),sc=t.readFloat(),sd=t.readFloat(),su=t.readFloat();for(let sm=0,s$=0,sf=so.getFrameCount()-1;so.setFrame(sm,sh,sc,sd,su),sm!=sf;sm++){let sg=t.readFloat(),sp=t.readFloat(),s_=t.readFloat(),sx=t.readFloat();switch(t.readByte()){case e0:so.setStepped(sm);break;case ey:es(t,so,s$++,sm,0,sh,sg,sc,sp,1),es(t,so,s$++,sm,1,sh,sg,sd,s_,1),es(t,so,s$++,sm,2,sh,sg,su,sx,1)}sh=sg,sc=sp,sd=s_,su=sx}i.push(so)}}for(let sb=0,sw=t.readInt(!0);sb<sw;sb++){let s0=s.skins[t.readInt(!0)];for(let sy=0,sk=t.readInt(!0);sy<sk;sy++){let sS=t.readInt(!0);for(let sI=0,sY=t.readInt(!0);sI<sY;sI++){let sv=t.readStringRef(),sC=s0.getAttachment(sS,sv),sA=sC.bones,sX=sC.vertices,sT=sA?sX.length/3*2:sX.length,sF=t.readInt(!0),s1=sF-1,sB=t.readInt(!0),sR=new ts(sF,sB,sS,sC),sP=t.readFloat();for(let s3=0,sV=0;;s3++){let s4,sD=t.readInt(!0);if(0==sD)s4=sA?I.newFloatArray(sT):sX;else{s4=I.newFloatArray(sT);let s6=t.readInt(!0);if(sD+=s6,1==a)for(let sM=s6;sM<sD;sM++)s4[sM]=t.readFloat();else for(let sL=s6;sL<sD;sL++)s4[sL]=t.readFloat()*a;if(!sA)for(let s2=0,sE=s4.length;s2<sE;s2++)s4[s2]+=sX[s2]}if(sR.setFrame(s3,sP,s4),s3==s1)break;let sN=t.readFloat();switch(t.readByte()){case e0:sR.setStepped(s3);break;case ey:es(t,sR,sV++,s3,0,sP,sN,0,1,1)}sP=sN}i.push(sR)}}}let sU=t.readInt(!0);if(sU>0){let sW=new tn(sU),sO=s.slots.length;for(let s5=0;s5<sU;s5++){let sq=t.readFloat(),s7=t.readInt(!0),sz=I.newArray(sO,0);for(let s8=sO-1;s8>=0;s8--)sz[s8]=-1;let sj=I.newArray(sO-s7,0),sH=0,sG=0;for(let s9=0;s9<s7;s9++){let sJ=t.readInt(!0);for(;sH!=sJ;)sj[sG++]=sH++;sz[sH+t.readInt(!0)]=sH++}for(;sH<sO;)sj[sG++]=sH++;for(let sQ=sO-1;sQ>=0;sQ--)-1==sz[sQ]&&(sz[sQ]=sj[--sG]);sW.setFrame(s5,sq,sz)}i.push(sW)}let sZ=t.readInt(!0);if(sZ>0){let sK=new ta(sZ);for(let it=0;it<sZ;it++){let ie=t.readFloat(),is=s.events[t.readInt(!0)],ii=new t2(ie,is);ii.intValue=t.readInt(!1),ii.floatValue=t.readFloat(),ii.stringValue=t.readBoolean()?t.readString():is.stringValue,ii.data.audioPath&&(ii.volume=t.readFloat(),ii.balance=t.readFloat()),sK.setFrame(it,ii)}i.push(sK)}let ia=0;for(let ir=0,il=i.length;ir<il;ir++)ia=Math.max(ia,i[ir].getDuration());return new R(e,i,ia)}},tQ=class{constructor(t,e=[],s=0,i=new DataView(t.buffer)){this.strings=e,this.index=s,this.buffer=i}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),s=127&e;return(128&e)!=0&&(s|=(127&(e=this.readByte()))<<7,(128&e)!=0&&(s|=(127&(e=this.readByte()))<<14,(128&e)!=0&&(s|=(127&(e=this.readByte()))<<21,(128&e)!=0&&(s|=(127&(e=this.readByte()))<<28)))),t?s:s>>>1^-(1&s)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let s=0;s<t;){let i=this.readUnsignedByte();switch(i>>4){case 12:case 13:e+=String.fromCharCode((31&i)<<6|63&this.readByte()),s+=2;break;case 14:e+=String.fromCharCode((15&i)<<12|(63&this.readByte())<<6|63&this.readByte()),s+=3;break;default:e+=String.fromCharCode(i),s++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}},tZ=class{constructor(t,e,s,i,a){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritDeform=a}},tK=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}};function et(t,e,s){let i=t.readFloat(),a=t.readFloat()*s;for(let r=0,n=0,l=e.getFrameCount()-1;e.setFrame(r,i,a),r!=l;r++){let o=t.readFloat(),h=t.readFloat()*s;switch(t.readByte()){case e0:e.setStepped(r);break;case ey:es(t,e,n++,r,0,i,o,a,h,s)}i=o,a=h}return e}function ee(t,e,s){let i=t.readFloat(),a=t.readFloat()*s,r=t.readFloat()*s;for(let n=0,l=0,o=e.getFrameCount()-1;e.setFrame(n,i,a,r),n!=o;n++){let h=t.readFloat(),c=t.readFloat()*s,d=t.readFloat()*s;switch(t.readByte()){case e0:e.setStepped(n);break;case ey:es(t,e,l++,n,0,i,h,a,c,s),es(t,e,l++,n,1,i,h,r,d,s)}i=h,a=c,r=d}return e}function es(t,e,s,i,a,r,n,l,o,h){e.setBezier(s,i,a,r,l,t.readFloat(),t.readFloat()*h,t.readFloat(),t.readFloat()*h,n,o)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(c||(c={}));var ei=0,ea=1,er=2,en=3,el=4,eo=5,eh=6,ec=7,ed=8,eu=9,em=0,e$=1,ef=2,eg=3,ep=4,e_=5,ex=0,eb=1,ew=2,e0=1,ey=2,ek=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=[],this.polygons=[],this.polygonPool=new v(()=>I.newFloatArray(16))}update(t,e){if(!t)throw Error("skeleton cannot be null.");let s=this.boundingBoxes,i=this.polygons,a=this.polygonPool,r=t.slots,n=r.length;s.length=0,a.freeAll(i),i.length=0;for(let l=0;l<n;l++){let o=r[l];if(!o.bone.active)continue;let h=o.getAttachment();if(h instanceof tS){let c=h;s.push(c);let d=a.obtain();d.length!=c.worldVerticesLength&&(d=I.newFloatArray(c.worldVerticesLength)),i.push(d),c.computeWorldVertices(o,0,c.worldVerticesLength,d,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=this.polygons;for(let r=0,n=a.length;r<n;r++){let l=a[r],o=l;for(let h=0,c=l.length;h<c;h+=2){let d=o[h],u=o[h+1];t=Math.min(t,d),e=Math.min(e,u),s=Math.max(s,d),i=Math.max(i,u)}}this.minX=t,this.minY=e,this.maxX=s,this.maxY=i}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,s,i){let a=this.minX,r=this.minY,n=this.maxX,l=this.maxY;if(t<=a&&s<=a||e<=r&&i<=r||t>=n&&s>=n||e>=l&&i>=l)return!1;let o=(i-e)/(s-t),h=o*(a-t)+e;if(h>r&&h<l||(h=o*(n-t)+e)>r&&h<l)return!0;let c=(r-e)/o+t;return!!(c>a)&&!!(c<n)||!!((c=(l-e)/o+t)>a)&&!!(c<n)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let s=this.polygons;for(let i=0,a=s.length;i<a;i++)if(this.containsPointPolygon(s[i],t,e))return this.boundingBoxes[i];return null}containsPointPolygon(t,e,s){let i=t,a=t.length,r=a-2,n=!1;for(let l=0;l<a;l+=2){let o=i[l+1],h=i[r+1];if(o<s&&h>=s||h<s&&o>=s){let c=i[l];c+(s-o)/(h-o)*(i[r]-c)<e&&(n=!n)}r=l}return n}intersectsSegment(t,e,s,i){let a=this.polygons;for(let r=0,n=a.length;r<n;r++)if(this.intersectsSegmentPolygon(a[r],t,e,s,i))return this.boundingBoxes[r];return null}intersectsSegmentPolygon(t,e,s,i,a){let r=t,n=t.length,l=e-i,o=s-a,h=e*a-s*i,c=r[n-2],d=r[n-1];for(let u=0;u<n;u+=2){let m=r[u],$=r[u+1],f=c*$-d*m,g=c-m,p=d-$,_=l*p-o*g,x=(h*g-l*f)/_;if((x>=c&&x<=m||x>=m&&x<=c)&&(x>=e&&x<=i||x>=i&&x<=e)){let b=(h*p-o*f)/_;if((b>=d&&b<=$||b>=$&&b<=d)&&(b>=s&&b<=a||b>=a&&b<=s))return!0}c=m,d=$}return!1}getPolygon(t){if(!t)throw Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return -1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},eS=class{constructor(){this.convexPolygons=[],this.convexPolygonsIndices=[],this.indicesArray=[],this.isConcaveArray=[],this.triangles=[],this.polygonPool=new v(()=>[]),this.polygonIndicesPool=new v(()=>[])}triangulate(t){let e=t,s=t.length>>1,i=this.indicesArray;i.length=0;for(let a=0;a<s;a++)i[a]=a;let r=this.isConcaveArray;r.length=0;for(let n=0,l=s;n<l;++n)r[n]=eS.isConcave(n,s,e,i);let o=this.triangles;for(o.length=0;s>3;){let h=s-1,c=0,d=1;for(;;){outer:if(!r[c]){let u=i[h]<<1,m=i[c]<<1,$=i[d]<<1,f=e[u],g=e[u+1],p=e[m],_=e[m+1],x=e[$],b=e[$+1];for(let w=(d+1)%s;w!=h;w=(w+1)%s){if(!r[w])continue;let y=i[w]<<1,k=e[y],S=e[y+1];if(eS.positiveArea(x,b,f,g,k,S)&&eS.positiveArea(f,g,p,_,k,S)&&eS.positiveArea(p,_,x,b,k,S))break outer}break}if(0==d){do{if(!r[c])break;c--}while(c>0);break}h=c,c=d,d=(d+1)%s}o.push(i[(s+c-1)%s]),o.push(i[c]),o.push(i[(c+1)%s]),i.splice(c,1),r.splice(c,1);let I=(--s+c-1)%s,Y=c==s?0:c;r[I]=eS.isConcave(I,s,e,i),r[Y]=eS.isConcave(Y,s,e,i)}return 3==s&&(o.push(i[2]),o.push(i[0]),o.push(i[1])),o}decompose(t,e){let s=t,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;let a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;let r=this.polygonIndicesPool.obtain();r.length=0;let n=this.polygonPool.obtain();n.length=0;let l=-1,o=0;for(let h=0,c=e.length;h<c;h+=3){let d=e[h]<<1,u=e[h+1]<<1,m=e[h+2]<<1,$=s[d],f=s[d+1],g=s[u],p=s[u+1],_=s[m],x=s[m+1],b=!1;if(l==d){let w=n.length-4,y=eS.winding(n[w],n[w+1],n[w+2],n[w+3],_,x),k=eS.winding(_,x,n[0],n[1],n[2],n[3]);y==o&&k==o&&(n.push(_),n.push(x),r.push(m),b=!0)}b||(n.length>0?(i.push(n),a.push(r)):(this.polygonPool.free(n),this.polygonIndicesPool.free(r)),(n=this.polygonPool.obtain()).length=0,n.push($),n.push(f),n.push(g),n.push(p),n.push(_),n.push(x),(r=this.polygonIndicesPool.obtain()).length=0,r.push(d),r.push(u),r.push(m),o=eS.winding($,f,g,p,_,x),l=d)}n.length>0&&(i.push(n),a.push(r));for(let S=0,I=i.length;S<I;S++){if(0==(r=a[S]).length)continue;let Y=r[0],v=r[r.length-1],C=(n=i[S]).length-4,A=n[C],X=n[C+1],T=n[C+2],F=n[C+3],B=n[0],R=n[1],P=n[2],V=n[3],D=eS.winding(A,X,T,F,B,R);for(let M=0;M<I;M++){if(M==S)continue;let L=a[M];if(3!=L.length)continue;let E=L[0],N=L[1],U=L[2],W=i[M],O=W[W.length-2],q=W[W.length-1];if(E!=Y||N!=v)continue;let z=eS.winding(A,X,T,F,O,q),j=eS.winding(O,q,B,R,P,V);z==D&&j==D&&(W.length=0,L.length=0,n.push(O),n.push(q),r.push(U),A=T,X=F,T=O,F=q,M=0)}}for(let H=i.length-1;H>=0;H--)0==(n=i[H]).length&&(i.splice(H,1),this.polygonPool.free(n),r=a[H],a.splice(H,1),this.polygonIndicesPool.free(r));return i}static isConcave(t,e,s,i){let a=i[(e+t-1)%e]<<1,r=i[t]<<1,n=i[(t+1)%e]<<1;return!this.positiveArea(s[a],s[a+1],s[r],s[r+1],s[n],s[n+1])}static positiveArea(t,e,s,i,a,r){return t*(r-i)+s*(e-r)+a*(i-e)>=0}static winding(t,e,s,i,a,r){let n=s-t,l=i-e;return a*l-r*n+n*e-t*l>=0?1:-1}},eI=class{constructor(){this.triangulator=new eS,this.clippingPolygon=[],this.clipOutput=[],this.clippedVertices=[],this.clippedTriangles=[],this.scratch=[]}clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let s=e.worldVerticesLength,i=I.setArraySize(this.clippingPolygon,s);e.computeWorldVertices(t,0,s,i,0,2);let a=this.clippingPolygon;eI.makeClockwise(a);let r=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a));for(let n=0,l=r.length;n<l;n++){let o=r[n];eI.makeClockwise(o),o.push(o[0]),o.push(o[1])}return r.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,s,i,a,r,n,l){let o=this.clipOutput,h=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,u=this.clippingPolygons.length,m=l?12:8,$=0;h.length=0,c.length=0;outer:for(let f=0;f<i;f+=3){let g=s[f]<<1,p=t[g],_=t[g+1],x=a[g],b=a[g+1],w=t[g=s[f+1]<<1],y=t[g+1],k=a[g],S=a[g+1],Y=t[g=s[f+2]<<1],v=t[g+1],C=a[g],A=a[g+1];for(let X=0;X<u;X++){let T=h.length;if(this.clip(p,_,w,y,Y,v,d[X],o)){let F=o.length;if(0==F)continue;let B=y-v,R=Y-w,P=p-Y,V=v-_,D=1/(B*P+R*(_-v)),M=F>>1,L=this.clipOutput,E=I.setArraySize(h,T+M*m);for(let N=0;N<F;N+=2){let U=L[N],W=L[N+1];E[T]=U,E[T+1]=W,E[T+2]=r.r,E[T+3]=r.g,E[T+4]=r.b,E[T+5]=r.a;let O=U-Y,q=W-v,z=(B*O+R*q)*D,j=(V*O+P*q)*D,H=1-z-j;E[T+6]=x*z+k*j+C*H,E[T+7]=b*z+S*j+A*H,l&&(E[T+8]=n.r,E[T+9]=n.g,E[T+10]=n.b,E[T+11]=n.a),T+=m}T=c.length;let G=I.setArraySize(c,T+3*(M-2));M--;for(let J=1;J<M;J++)G[T]=$,G[T+1]=$+J,G[T+2]=$+J+1,T+=3;$+=M+1}else{let Q=I.setArraySize(h,T+3*m);Q[T]=p,Q[T+1]=_,Q[T+2]=r.r,Q[T+3]=r.g,Q[T+4]=r.b,Q[T+5]=r.a,l?(Q[T+6]=x,Q[T+7]=b,Q[T+8]=n.r,Q[T+9]=n.g,Q[T+10]=n.b,Q[T+11]=n.a,Q[T+12]=w,Q[T+13]=y,Q[T+14]=r.r,Q[T+15]=r.g,Q[T+16]=r.b,Q[T+17]=r.a,Q[T+18]=k,Q[T+19]=S,Q[T+20]=n.r,Q[T+21]=n.g,Q[T+22]=n.b,Q[T+23]=n.a,Q[T+24]=Y,Q[T+25]=v,Q[T+26]=r.r,Q[T+27]=r.g,Q[T+28]=r.b,Q[T+29]=r.a,Q[T+30]=C,Q[T+31]=A,Q[T+32]=n.r,Q[T+33]=n.g,Q[T+34]=n.b,Q[T+35]=n.a):(Q[T+6]=x,Q[T+7]=b,Q[T+8]=w,Q[T+9]=y,Q[T+10]=r.r,Q[T+11]=r.g,Q[T+12]=r.b,Q[T+13]=r.a,Q[T+14]=k,Q[T+15]=S,Q[T+16]=Y,Q[T+17]=v,Q[T+18]=r.r,Q[T+19]=r.g,Q[T+20]=r.b,Q[T+21]=r.a,Q[T+22]=C,Q[T+23]=A),T=c.length;let Z=I.setArraySize(c,T+3);Z[T]=$,Z[T+1]=$+1,Z[T+2]=$+2,$+=3;continue outer}}}}clip(t,e,s,i,a,r,n,l){let o=l,h=!1,c=null;n.length%4>=2?(c=l,l=this.scratch):c=this.scratch,c.length=0,c.push(t),c.push(e),c.push(s),c.push(i),c.push(a),c.push(r),c.push(t),c.push(e),l.length=0;let d=n,u=n.length-4;for(let m=0;;m+=2){let $=d[m],f=d[m+1],g=d[m+2],p=d[m+3],_=$-g,x=f-p,b=c,w=c.length-2,y=l.length;for(let k=0;k<w;k+=2){let S=b[k],I=b[k+1],Y=b[k+2],v=b[k+3],C=_*(v-p)-x*(Y-g)>0;if(_*(I-p)-x*(S-g)>0){if(C){l.push(Y),l.push(v);continue}let A=v-I,X=Y-S,T=A*(g-$)-X*(p-f);if(Math.abs(T)>1e-6){let F=(X*(f-I)-A*($-S))/T;l.push($+(g-$)*F),l.push(f+(p-f)*F)}else l.push($),l.push(f)}else if(C){let B=v-I,R=Y-S,P=B*(g-$)-R*(p-f);if(Math.abs(P)>1e-6){let V=(R*(f-I)-B*($-S))/P;l.push($+(g-$)*V),l.push(f+(p-f)*V)}else l.push($),l.push(f);l.push(Y),l.push(v)}h=!0}if(y==l.length)return o.length=0,!0;if(l.push(l[0]),l.push(l[1]),m==u)break;let D=l;(l=c).length=0,c=D}if(o!=l){o.length=0;for(let M=0,L=l.length-2;M<L;M++)o[M]=l[M]}else o.length=o.length-2;return h}static makeClockwise(t){let e=t,s=t.length,i=e[s-2]*e[1]-e[0]*e[s-1],a=0,r=0,n=0,l=0;for(let o=0,h=s-3;o<h;o+=2)a=e[o],r=e[o+1],n=e[o+2],i+=a*(l=e[o+3])-n*r;if(!(i<0))for(let c=0,d=s-2,u=s>>1;c<u;c+=2){let m=e[c],$=e[c+1],f=d-c;e[c]=e[f],e[c+1]=e[f+1],e[f]=m,e[f+1]=$}}},eY=class{constructor(t){this.attachmentLoader=null,this.scale=1,this.linkedMeshes=[],this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,s=new t8,i="string"==typeof t?JSON.parse(t):t,a=i.skeleton;if(a&&(s.hash=a.hash,s.version=a.spine,s.x=a.x,s.y=a.y,s.width=a.width,s.height=a.height,s.fps=a.fps,s.imagesPath=a.images),i.bones)for(let c=0;c<i.bones.length;c++){let d=i.bones[c],u=null,m=eT(d,"parent",null);m&&(u=s.findBone(m));let $=new t4(s.bones.length,d.name,u);$.length=eT(d,"length",0)*e,$.x=eT(d,"x",0)*e,$.y=eT(d,"y",0)*e,$.rotation=eT(d,"rotation",0),$.scaleX=eT(d,"scaleX",1),$.scaleY=eT(d,"scaleY",1),$.shearX=eT(d,"shearX",0),$.shearY=eT(d,"shearY",0),$.transformMode=I.enumValue(r,eT(d,"transform","Normal")),$.skinRequired=eT(d,"skin",!1);let f=eT(d,"color",null);f&&$.color.setFromString(f),s.bones.push($)}if(i.slots)for(let g=0;g<i.slots.length;g++){let p=i.slots[g],x=s.findBone(p.bone),b=new tG(s.slots.length,p.name,x),w=eT(p,"color",null);w&&b.color.setFromString(w);let y=eT(p,"dark",null);y&&(b.darkColor=_.fromString(y)),b.attachmentName=eT(p,"attachment",null),b.blendMode=I.enumValue(h,eT(p,"blend","normal")),s.slots.push(b)}if(i.ik)for(let k=0;k<i.ik.length;k++){let S=i.ik[k],Y=new tU(S.name);Y.order=eT(S,"order",0),Y.skinRequired=eT(S,"skin",!1);for(let v=0;v<S.bones.length;v++)Y.bones.push(s.findBone(S.bones[v]));Y.target=s.findBone(S.target),Y.mix=eT(S,"mix",1),Y.softness=eT(S,"softness",0)*e,Y.bendDirection=eT(S,"bendPositive",!0)?1:-1,Y.compress=eT(S,"compress",!1),Y.stretch=eT(S,"stretch",!1),Y.uniform=eT(S,"uniform",!1),s.ikConstraints.push(Y)}if(i.transform)for(let C=0;C<i.transform.length;C++){let A=i.transform[C],X=new t9(A.name);X.order=eT(A,"order",0),X.skinRequired=eT(A,"skin",!1);for(let T=0;T<A.bones.length;T++)X.bones.push(s.findBone(A.bones[T]));let F=A.target;X.target=s.findBone(F),X.local=eT(A,"local",!1),X.relative=eT(A,"relative",!1),X.offsetRotation=eT(A,"rotation",0),X.offsetX=eT(A,"x",0)*e,X.offsetY=eT(A,"y",0)*e,X.offsetScaleX=eT(A,"scaleX",0),X.offsetScaleY=eT(A,"scaleY",0),X.offsetShearY=eT(A,"shearY",0),X.mixRotate=eT(A,"mixRotate",1),X.mixX=eT(A,"mixX",1),X.mixY=eT(A,"mixY",X.mixX),X.mixScaleX=eT(A,"mixScaleX",1),X.mixScaleY=eT(A,"mixScaleY",X.mixScaleX),X.mixShearY=eT(A,"mixShearY",1),s.transformConstraints.push(X)}if(i.path)for(let B=0;B<i.path.length;B++){let R=i.path[B],P=new tW(R.name);P.order=eT(R,"order",0),P.skinRequired=eT(R,"skin",!1);for(let V=0;V<R.bones.length;V++)P.bones.push(s.findBone(R.bones[V]));let D=R.target;P.target=s.findSlot(D),P.positionMode=I.enumValue(n,eT(R,"positionMode","Percent")),P.spacingMode=I.enumValue(l,eT(R,"spacingMode","Length")),P.rotateMode=I.enumValue(o,eT(R,"rotateMode","Tangent")),P.offsetRotation=eT(R,"rotation",0),P.position=eT(R,"position",0),P.positionMode==n.Fixed&&(P.position*=e),P.spacing=eT(R,"spacing",0),(P.spacingMode==l.Length||P.spacingMode==l.Fixed)&&(P.spacing*=e),P.mixRotate=eT(R,"mixRotate",1),P.mixX=eT(R,"mixX",1),P.mixY=eT(R,"mixY",P.mixX),s.pathConstraints.push(P)}if(i.skins)for(let M=0;M<i.skins.length;M++){let L=i.skins[M],E=new tH(L.name);if(L.bones)for(let N=0;N<L.bones.length;N++)E.bones.push(s.findBone(L.bones[N]));if(L.ik)for(let U=0;U<L.ik.length;U++)E.constraints.push(s.findIkConstraint(L.ik[U]));if(L.transform)for(let W=0;W<L.transform.length;W++)E.constraints.push(s.findTransformConstraint(L.transform[W]));if(L.path)for(let O=0;O<L.path.length;O++)E.constraints.push(s.findPathConstraint(L.path[O]));for(let q in L.attachments){let z=s.findSlot(q),j=L.attachments[q];for(let H in j){let G=this.readAttachment(j[H],E,z.index,H,s);G&&E.setAttachment(z.index,H,G)}}s.skins.push(E),"default"==E.name&&(s.defaultSkin=E)}for(let J=0,Q=this.linkedMeshes.length;J<Q;J++){let Z=this.linkedMeshes[J],K=(Z.skin?s.findSkin(Z.skin):s.defaultSkin).getAttachment(Z.slotIndex,Z.parent);Z.mesh.deformAttachment=Z.inheritDeform?K:Z.mesh,Z.mesh.setParentMesh(K),Z.mesh.updateUVs()}if(this.linkedMeshes.length=0,i.events)for(let tt in i.events){let te=i.events[tt],ts=new tE(tt);ts.intValue=eT(te,"int",0),ts.floatValue=eT(te,"float",0),ts.stringValue=eT(te,"string",""),ts.audioPath=eT(te,"audio",null),ts.audioPath&&(ts.volume=eT(te,"volume",1),ts.balance=eT(te,"balance",0)),s.events.push(ts)}if(i.animations)for(let ti in i.animations){let ta=i.animations[ti];this.readAnimation(ta,ti,s)}return s}readAttachment(t,e,s,i,a){let r=this.scale;switch(i=eT(t,"name",i),eT(t,"type","region")){case"region":{let n=eT(t,"path",i),l=this.attachmentLoader.newRegionAttachment(e,i,n);if(!l)return null;l.path=n,l.x=eT(t,"x",0)*r,l.y=eT(t,"y",0)*r,l.scaleX=eT(t,"scaleX",1),l.scaleY=eT(t,"scaleY",1),l.rotation=eT(t,"rotation",0),l.width=t.width*r,l.height=t.height*r;let o=eT(t,"color",null);return o&&l.color.setFromString(o),l.updateOffset(),l}case"boundingbox":{let h=this.attachmentLoader.newBoundingBoxAttachment(e,i);if(!h)return null;this.readVertices(t,h,t.vertexCount<<1);let c=eT(t,"color",null);return c&&h.color.setFromString(c),h}case"mesh":case"linkedmesh":{let d=eT(t,"path",i),u=this.attachmentLoader.newMeshAttachment(e,i,d);if(!u)return null;u.path=d;let m=eT(t,"color",null);m&&u.color.setFromString(m),u.width=eT(t,"width",0)*r,u.height=eT(t,"height",0)*r;let $=eT(t,"parent",null);if($)return this.linkedMeshes.push(new ev(u,eT(t,"skin",null),s,$,eT(t,"deform",!0))),u;let f=t.uvs;return this.readVertices(t,u,f.length),u.triangles=t.triangles,u.regionUVs=f,u.updateUVs(),u.edges=eT(t,"edges",null),u.hullLength=2*eT(t,"hull",0),u}case"path":{let g=this.attachmentLoader.newPathAttachment(e,i);if(!g)return null;g.closed=eT(t,"closed",!1),g.constantSpeed=eT(t,"constantSpeed",!0);let p=t.vertexCount;this.readVertices(t,g,p<<1);let _=I.newArray(p/3,0);for(let x=0;x<t.lengths.length;x++)_[x]=t.lengths[x]*r;g.lengths=_;let b=eT(t,"color",null);return b&&g.color.setFromString(b),g}case"point":{let w=this.attachmentLoader.newPointAttachment(e,i);if(!w)return null;w.x=eT(t,"x",0)*r,w.y=eT(t,"y",0)*r,w.rotation=eT(t,"rotation",0);let y=eT(t,"color",null);return y&&w.color.setFromString(y),w}case"clipping":{let k=this.attachmentLoader.newClippingAttachment(e,i);if(!k)return null;let S=eT(t,"end",null);S&&(k.endSlot=a.findSlot(S));let Y=t.vertexCount;this.readVertices(t,k,Y<<1);let v=eT(t,"color",null);return v&&k.color.setFromString(v),k}}return null}readVertices(t,e,s){let i=this.scale;e.worldVerticesLength=s;let a=t.vertices;if(s==a.length){let r=I.toFloatArray(a);if(1!=i)for(let n=0,l=a.length;n<l;n++)r[n]*=i;e.vertices=r;return}let o=[],h=[];for(let c=0,d=a.length;c<d;){let u=a[c++];h.push(u);for(let m=c+4*u;c<m;c+=4)h.push(a[c]),o.push(a[c+1]*i),o.push(a[c+2]*i),o.push(a[c+3])}e.bones=h,e.vertices=I.toFloatArray(o)}readAnimation(t,e,s){let i=this.scale,a=[];if(t.slots)for(let r in t.slots){let o=t.slots[r],h=s.findSlot(r).index;for(let c in o){let d=o[c];if(!d)continue;let u=d.length;if("attachment"==c){let m=new te(u,h);for(let $=0;$<u;$++){let f=d[$];m.setFrame($,eT(f,"time",0),f.name)}a.push(m)}else if("rgba"==c){let g=new J(u,u<<2,h),p=d[0],x=eT(p,"time",0),b=_.fromString(p.color);for(let w=0,y=0;;w++){g.setFrame(w,x,b.r,b.g,b.b,b.a);let k=d[w+1];if(!k){g.shrink(y);break}let S=eT(k,"time",0),Y=_.fromString(k.color),v=p.curve;v&&(y=eX(v,g,y,w,0,x,S,b.r,Y.r,1),y=eX(v,g,y,w,1,x,S,b.g,Y.g,1),y=eX(v,g,y,w,2,x,S,b.b,Y.b,1),y=eX(v,g,y,w,3,x,S,b.a,Y.a,1)),x=S,b=Y,p=k}a.push(g)}else if("rgb"==c){let C=new Q(u,3*u,h),A=d[0],X=eT(A,"time",0),T=_.fromString(A.color);for(let F=0,B=0;;F++){C.setFrame(F,X,T.r,T.g,T.b);let P=d[F+1];if(!P){C.shrink(B);break}let V=eT(P,"time",0),D=_.fromString(P.color),M=A.curve;M&&(B=eX(M,C,B,F,0,X,V,T.r,D.r,1),B=eX(M,C,B,F,1,X,V,T.g,D.g,1),B=eX(M,C,B,F,2,X,V,T.b,D.b,1)),X=V,T=D,A=P}a.push(C)}else if("alpha"==c)a.push(eC(d,new Z(u,u,h),0,1));else if("rgba2"==c){let L=new K(u,7*u,h),ti=d[0],tr=eT(ti,"time",0),tu=_.fromString(ti.light),tm=_.fromString(ti.dark);for(let t$=0,tf=0;;t$++){L.setFrame(t$,tr,tu.r,tu.g,tu.b,tu.a,tm.r,tm.g,tm.b);let tg=d[t$+1];if(!tg){L.shrink(tf);break}let tp=eT(tg,"time",0),t_=_.fromString(tg.light),tx=_.fromString(tg.dark),tb=ti.curve;tb&&(tf=eX(tb,L,tf,t$,0,tr,tp,tu.r,t_.r,1),tf=eX(tb,L,tf,t$,1,tr,tp,tu.g,t_.g,1),tf=eX(tb,L,tf,t$,2,tr,tp,tu.b,t_.b,1),tf=eX(tb,L,tf,t$,3,tr,tp,tu.a,t_.a,1),tf=eX(tb,L,tf,t$,4,tr,tp,tm.r,tx.r,1),tf=eX(tb,L,tf,t$,5,tr,tp,tm.g,tx.g,1),tf=eX(tb,L,tf,t$,6,tr,tp,tm.b,tx.b,1)),tr=tp,tu=t_,tm=tx,ti=tg}a.push(L)}else if("rgb2"==c){let tw=new tt(u,6*u,h),t0=d[0],ty=eT(t0,"time",0),tk=_.fromString(t0.light),tS=_.fromString(t0.dark);for(let tI=0,tY=0;;tI++){tw.setFrame(tI,ty,tk.r,tk.g,tk.b,tS.r,tS.g,tS.b);let tv=d[tI+1];if(!tv){tw.shrink(tY);break}let tC=eT(tv,"time",0),tA=_.fromString(tv.light),tX=_.fromString(tv.dark),tT=t0.curve;tT&&(tY=eX(tT,tw,tY,tI,0,ty,tC,tk.r,tA.r,1),tY=eX(tT,tw,tY,tI,1,ty,tC,tk.g,tA.g,1),tY=eX(tT,tw,tY,tI,2,ty,tC,tk.b,tA.b,1),tY=eX(tT,tw,tY,tI,3,ty,tC,tS.r,tX.r,1),tY=eX(tT,tw,tY,tI,4,ty,tC,tS.g,tX.g,1),tY=eX(tT,tw,tY,tI,5,ty,tC,tS.b,tX.b,1)),ty=tC,tk=tA,tS=tX,t0=tv}a.push(tw)}}}if(t.bones)for(let tF in t.bones){let t1=t.bones[tF],tB=s.findBone(tF).index;for(let tR in t1){let tP=t1[tR],t3=tP.length;if(0!=t3){if("rotate"===tR)a.push(eC(tP,new E(t3,t3,tB),0,1));else if("translate"===tR){let tV=new N(t3,t3<<1,tB);a.push(eA(tP,tV,"x","y",0,i))}else if("translatex"===tR){let t4=new U(t3,t3,tB);a.push(eC(tP,t4,0,i))}else if("translatey"===tR){let tD=new W(t3,t3,tB);a.push(eC(tP,tD,0,i))}else if("scale"===tR){let t6=new O(t3,t3<<1,tB);a.push(eA(tP,t6,"x","y",1,1))}else if("scalex"===tR){let tM=new q(t3,t3,tB);a.push(eC(tP,tM,1,1))}else if("scaley"===tR){let tL=new z(t3,t3,tB);a.push(eC(tP,tL,1,1))}else if("shear"===tR){let tE=new j(t3,t3<<1,tB);a.push(eA(tP,tE,"x","y",0,1))}else if("shearx"===tR){let tN=new H(t3,t3,tB);a.push(eC(tP,tN,0,1))}else if("sheary"===tR){let tU=new G(t3,t3,tB);a.push(eC(tP,tU,0,1))}}}}if(t.ik)for(let tW in t.ik){let tO=t.ik[tW],t5=tO[0];if(!t5)continue;let tq=s.findIkConstraint(tW),t7=s.ikConstraints.indexOf(tq),tz=new tl(tO.length,tO.length<<1,t7),t8=eT(t5,"time",0),tj=eT(t5,"mix",1),tH=eT(t5,"softness",0)*i;for(let tG=0,t9=0;;tG++){tz.setFrame(tG,t8,tj,tH,eT(t5,"bendPositive",!0)?1:-1,eT(t5,"compress",!1),eT(t5,"stretch",!1));let tJ=tO[tG+1];if(!tJ){tz.shrink(t9);break}let tQ=eT(tJ,"time",0),tZ=eT(tJ,"mix",1),tK=eT(tJ,"softness",0)*i,et=t5.curve;et&&(t9=eX(et,tz,t9,tG,0,t8,tQ,tj,tZ,1),t9=eX(et,tz,t9,tG,1,t8,tQ,tH,tK,i)),t8=tQ,tj=tZ,tH=tK,t5=tJ}a.push(tz)}if(t.transform)for(let ee in t.transform){let es=t.transform[ee],ei=es[0];if(!ei)continue;let ea=s.findTransformConstraint(ee),er=s.transformConstraints.indexOf(ea),en=new to(es.length,6*es.length,er),el=eT(ei,"time",0),eo=eT(ei,"mixRotate",1),eh=eT(ei,"mixX",1),ec=eT(ei,"mixY",eh),ed=eT(ei,"mixScaleX",1),eu=eT(ei,"mixScaleY",ed),em=eT(ei,"mixShearY",1);for(let e$=0,ef=0;;e$++){en.setFrame(e$,el,eo,eh,ec,ed,eu,em);let eg=es[e$+1];if(!eg){en.shrink(ef);break}let ep=eT(eg,"time",0),e_=eT(eg,"mixRotate",1),ex=eT(eg,"mixX",1),eb=eT(eg,"mixY",ex),ew=eT(eg,"mixScaleX",1),e0=eT(eg,"mixScaleY",ew),ey=eT(eg,"mixShearY",1),ek=ei.curve;ek&&(ef=eX(ek,en,ef,e$,0,el,ep,eo,e_,1),ef=eX(ek,en,ef,e$,1,el,ep,eh,ex,1),ef=eX(ek,en,ef,e$,2,el,ep,ec,eb,1),ef=eX(ek,en,ef,e$,3,el,ep,ed,ew,1),ef=eX(ek,en,ef,e$,4,el,ep,eu,e0,1),ef=eX(ek,en,ef,e$,5,el,ep,em,ey,1)),el=ep,eo=e_,eh=ex,ec=eb,ed=ew,eu=e0,ed=ew,ei=eg}a.push(en)}if(t.path)for(let eS in t.path){let eI=t.path[eS],eY=s.findPathConstraint(eS),ev=s.pathConstraints.indexOf(eY);for(let eF in eI){let e1=eI[eF],eB=e1[0];if(!eB)continue;let eR=e1.length;if("position"===eF){let eP=new th(eR,eR,ev);a.push(eC(e1,eP,0,eY.positionMode==n.Fixed?i:1))}else if("spacing"===eF){let e3=new tc(eR,eR,ev);a.push(eC(e1,e3,0,eY.spacingMode==l.Length||eY.spacingMode==l.Fixed?i:1))}else if("mix"===eF){let eV=new td(eR,3*eR,ev),e4=eT(eB,"time",0),eD=eT(eB,"mixRotate",1),e6=eT(eB,"mixX",1),eM=eT(eB,"mixY",e6);for(let eL=0,e2=0;;eL++){eV.setFrame(eL,e4,eD,e6,eM);let eE=e1[eL+1];if(!eE){eV.shrink(e2);break}let eN=eT(eE,"time",0),eU=eT(eE,"mixRotate",1),eW=eT(eE,"mixX",1),eO=eT(eE,"mixY",eW),e5=eB.curve;e5&&(e2=eX(e5,eV,e2,eL,0,e4,eN,eD,eU,1),e2=eX(e5,eV,e2,eL,1,e4,eN,e6,eW,1),e2=eX(e5,eV,e2,eL,2,e4,eN,eM,eO,1)),e4=eN,eD=eU,e6=eW,eM=eO,eB=eE}a.push(eV)}}}if(t.deform)for(let eq in t.deform){let e7=t.deform[eq],ez=s.findSkin(eq);for(let e8 in e7){let ej=e7[e8],eH=s.findSlot(e8).index;for(let eG in ej){let e9=ej[eG],eJ=e9[0];if(!eJ)continue;let eQ=ez.getAttachment(eH,eG),eZ=eQ.bones,eK=eQ.vertices,st=eZ?eK.length/3*2:eK.length,se=new ts(e9.length,e9.length,eH,eQ),ss=eT(eJ,"time",0);for(let si=0,sa=0;;si++){let sr,sn=eT(eJ,"vertices",null);if(sn){sr=I.newFloatArray(st);let sl=eT(eJ,"offset",0);if(I.arrayCopy(sn,0,sr,sl,sn.length),1!=i)for(let so=sl,sh=so+sn.length;so<sh;so++)sr[so]*=i;if(!eZ)for(let sc=0;sc<st;sc++)sr[sc]+=eK[sc]}else sr=eZ?I.newFloatArray(st):eK;se.setFrame(si,ss,sr);let sd=e9[si+1];if(!sd){se.shrink(sa);break}let su=eT(sd,"time",0),sm=eJ.curve;sm&&(sa=eX(sm,se,sa,si,0,ss,su,0,1,1)),ss=su,eJ=sd}a.push(se)}}}if(t.drawOrder){let s$=new tn(t.drawOrder.length),sf=s.slots.length,sg=0;for(let sp=0;sp<t.drawOrder.length;sp++,sg++){let s_=t.drawOrder[sp],sx=null,sb=eT(s_,"offsets",null);if(sb){sx=I.newArray(sf,-1);let sw=I.newArray(sf-sb.length,0),s0=0,sy=0;for(let sk=0;sk<sb.length;sk++){let sS=sb[sk],sI=s.findSlot(sS.slot).index;for(;s0!=sI;)sw[sy++]=s0++;sx[s0+sS.offset]=s0++}for(;s0<sf;)sw[sy++]=s0++;for(let sY=sf-1;sY>=0;sY--)-1==sx[sY]&&(sx[sY]=sw[--sy])}s$.setFrame(sg,eT(s_,"time",0),sx)}a.push(s$)}if(t.events){let sv=new ta(t.events.length),sC=0;for(let sA=0;sA<t.events.length;sA++,sC++){let sX=t.events[sA],sT=s.findEvent(sX.name),sF=new t2(I.toSinglePrecision(eT(sX,"time",0)),sT);sF.intValue=eT(sX,"int",sT.intValue),sF.floatValue=eT(sX,"float",sT.floatValue),sF.stringValue=eT(sX,"string",sT.stringValue),sF.data.audioPath&&(sF.volume=eT(sX,"volume",1),sF.balance=eT(sX,"balance",0)),sv.setFrame(sC,sF)}a.push(sv)}let s1=0;for(let sB=0,sR=a.length;sB<sR;sB++)s1=Math.max(s1,a[sB].getDuration());s.animations.push(new R(e,a,s1))}},ev=class{constructor(t,e,s,i,a){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritDeform=a}};function eC(t,e,s,i){let a=t[0],r=eT(a,"time",0),n=eT(a,"value",s)*i,l=0;for(let o=0;;o++){e.setFrame(o,r,n);let h=t[o+1];if(!h)return e.shrink(l),e;let c=eT(h,"time",0),d=eT(h,"value",s)*i;a.curve&&(l=eX(a.curve,e,l,o,0,r,c,n,d,i)),r=c,n=d,a=h}}function eA(t,e,s,i,a,r){let n=t[0],l=eT(n,"time",0),o=eT(n,s,a)*r,h=eT(n,i,a)*r,c=0;for(let d=0;;d++){e.setFrame(d,l,o,h);let u=t[d+1];if(!u)return e.shrink(c),e;let m=eT(u,"time",0),$=eT(u,s,a)*r,f=eT(u,i,a)*r,g=n.curve;g&&(c=eX(g,e,c,d,0,l,m,o,$,r),c=eX(g,e,c,d,1,l,m,h,f,r)),l=m,o=$,h=f,n=u}}function eX(t,e,s,i,a,r,n,l,o,h){if("stepped"==t)return e.setStepped(i),s;let c=a<<2,d=t[c],u=t[c+1]*h,m=t[c+2],$=t[c+3]*h;return e.setBezier(s,i,a,r,l,d,u,m,$,n,o),s+1}function eT(t,e,s){return void 0!==t[e]?t[e]:s}void 0===Math.fround&&(Math.fround=function(t){return function(e){return t[0]=e,t[0]}}(new Float32Array(1)));var eF=class{constructor(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,s,i){t.x+=b.randomTriangular(-this.jitterX,this.jitterY),t.y+=b.randomTriangular(-this.jitterX,this.jitterY)}end(){}},e1=class{constructor(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY}transform(t,e,s,i){let a=this.angle*b.degreesToRadians,r=t.x-this.worldX,n=t.y-this.worldY,l=Math.sqrt(r*r+n*n);if(l<this.radius){let o=e1.interpolation.apply(0,a,(this.radius-l)/this.radius),h=Math.cos(o),c=Math.sin(o);t.x=h*r-c*n+this.worldX,t.y=c*r+h*n+this.worldY}}end(){}},eB=e1;eB.interpolation=new k(2);var eR=class extends tY{constructor(t){super(t)}setFilters(t,e){}setWraps(t,e){}dispose(){}},eP=class extends tM{constructor(t="",e=null){super(t=>new eR(t),t,e)}},e3=class{constructor(t){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=I.newFloatArray(8192),this.tempColor=new _,this.ctx=t}draw(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)}drawImages(t){let e=this.ctx,s=this.tempColor,i=t.color,a=t.drawOrder;this.debugRendering&&(e.strokeStyle="green");for(let r=0,n=a.length;r<n;r++){let l=a[r],o=l.bone;if(!o.active)continue;let h=l.getAttachment();if(!(h instanceof t3))continue;let c=h.region,d=c.page.texture.getImage(),u=l.color,m=h.color;s.set(i.r*u.r*m.r,i.g*u.g*m.g,i.b*u.b*m.b,i.a*u.a*m.a),e.save(),e.transform(o.a,o.c,o.b,o.d,o.worldX,o.worldY),e.translate(h.offset[0],h.offset[1]),e.rotate(h.rotation*Math.PI/180);let $=h.width/c.originalWidth;e.scale($*h.scaleX,$*h.scaleY);let f=c.width,g=c.height;if(e.translate(f/2,g/2),90==h.region.degrees){let p=f;f=g,g=p,e.rotate(-Math.PI/2)}e.scale(1,-1),e.translate(-f/2,-g/2),e.globalAlpha=s.a,e.drawImage(d,c.x,c.y,f,g,0,0,f,g),this.debugRendering&&e.strokeRect(0,0,f,g),e.restore()}}drawTriangles(t){let e=this.ctx,s=this.tempColor,i=t.color,a=t.drawOrder,r=null,n=this.vertices,l=null;for(let o=0,h=a.length;o<h;o++){let c=a[o],d=c.getAttachment(),u,m;if(d instanceof t3){let $=d;n=this.computeRegionVertices(c,$,!1),l=e3.QUAD_TRIANGLES,u=(m=$.region).page.texture.getImage()}else{if(!(d instanceof t1))continue;let f=d;n=this.computeMeshVertices(c,f,!1),l=f.triangles,u=f.region.renderObject.page.texture.getImage()}if(u){c.data.blendMode!=r&&(r=c.data.blendMode);let g=c.color,p=d.color;s.set(i.r*g.r*p.r,i.g*g.g*p.g,i.b*g.b*p.b,i.a*g.a*p.a),e.globalAlpha=s.a;for(var _=0;_<l.length;_+=3){let x=8*l[_],b=8*l[_+1],w=8*l[_+2],y=n[x],k=n[x+1],S=n[x+6],I=n[x+7],Y=n[b],v=n[b+1],C=n[b+6],A=n[b+7],X=n[w],T=n[w+1],F=n[w+6],B=n[w+7];this.drawTriangle(u,y,k,S,I,Y,v,C,A,X,T,F,B),this.debugRendering&&(e.strokeStyle="green",e.beginPath(),e.moveTo(y,k),e.lineTo(Y,v),e.lineTo(X,T),e.lineTo(y,k),e.stroke())}}}this.ctx.globalAlpha=1}drawTriangle(t,e,s,i,a,r,n,l,o,h,c,d,u){let m=this.ctx;i*=t.width,a*=t.height,l*=t.width,o*=t.height,d*=t.width,u*=t.height,m.beginPath(),m.moveTo(e,s),m.lineTo(r,n),m.lineTo(h,c),m.closePath(),r-=e,n-=s,h-=e,c-=s,l-=i,o-=a,d-=i;var $=1/(l*(u-=a)-d*o),f=(u*r-o*h)*$,g=(u*n-o*c)*$,p=(l*h-d*r)*$,_=(l*c-d*n)*$,x=e-f*i-p*a,b=s-g*i-_*a;m.save(),m.transform(f,g,p,_,x,b),m.clip(),m.drawImage(t,0,0),m.restore()}computeRegionVertices(t,e,s){let i=t.bone.skeleton.color,a=t.color,r=e.color,n=i.a*a.a*r.a,l=s?n:1,o=this.tempColor;o.set(i.r*a.r*r.r*l,i.g*a.g*r.g*l,i.b*a.b*r.b*l,n),e.computeWorldVertices(t.bone,this.vertices,0,e3.VERTEX_SIZE);let h=this.vertices,c=e.uvs;return h[t3.C1R]=o.r,h[t3.C1G]=o.g,h[t3.C1B]=o.b,h[t3.C1A]=o.a,h[t3.U1]=c[0],h[t3.V1]=c[1],h[t3.C2R]=o.r,h[t3.C2G]=o.g,h[t3.C2B]=o.b,h[t3.C2A]=o.a,h[t3.U2]=c[2],h[t3.V2]=c[3],h[t3.C3R]=o.r,h[t3.C3G]=o.g,h[t3.C3B]=o.b,h[t3.C3A]=o.a,h[t3.U3]=c[4],h[t3.V3]=c[5],h[t3.C4R]=o.r,h[t3.C4G]=o.g,h[t3.C4B]=o.b,h[t3.C4A]=o.a,h[t3.U4]=c[6],h[t3.V4]=c[7],h}computeMeshVertices(t,e,s){let i=t.bone.skeleton.color,a=t.color,r=e.color,n=i.a*a.a*r.a,l=s?n:1,o=this.tempColor;o.set(i.r*a.r*r.r*l,i.g*a.g*r.g*l,i.b*a.b*r.b*l,n);let h=e.worldVerticesLength/2,c=this.vertices;c.length<e.worldVerticesLength&&(this.vertices=c=I.newFloatArray(e.worldVerticesLength)),e.computeWorldVertices(t,0,e.worldVerticesLength,c,0,e3.VERTEX_SIZE);let d=e.uvs;for(let u=0,m=0,$=2;u<h;u++)c[$++]=o.r,c[$++]=o.g,c[$++]=o.b,c[$++]=o.a,c[$++]=d[m++],c[$++]=d[m++],$+=2;return c}},eV=e3;return eV.QUAD_TRIANGLES=[0,1,2,2,3,0],eV.VERTEX_SIZE=8,$})();